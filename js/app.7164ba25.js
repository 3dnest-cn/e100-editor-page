(function(t){function e(e){for(var n,a,s=e[0],l=e[1],c=e[2],p=0,d=[];p<s.length;p++)a=s[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==o[l]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},o={app:0},r=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(i,n,function(e){return t[e]}.bind(null,n));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;r.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0085":function(t,e,i){"use strict";i("12fd")},1227:function(t,e,i){},"12fd":function(t,e,i){},"14ac":function(t,e,i){"use strict";i("9018")},"2b1a":function(t,e,i){},"389a":function(t,e,i){},"3a74":function(t,e,i){},"40e4":function(t,e,i){"use strict";i("8899")},"4c00":function(t,e,i){"use strict";i("88d6")},5051:function(t,e,i){},"507d":function(t,e,i){"use strict";i("3a74")},"56d7":function(t,e,i){"use strict";i.r(e);var n={};i.r(n),i.d(n,"Line",(function(){return pe})),i.d(n,"Vector",(function(){return fe})),i.d(n,"Segment",(function(){return me})),i.d(n,"Point",(function(){return ve}));var o={};i.r(o),i.d(o,"fromBothPoint",(function(){return ye})),i.d(o,"fromSegment",(function(){return we})),i.d(o,"from",(function(){return xe})),i.d(o,"dot",(function(){return ke})),i.d(o,"multiply",(function(){return Te})),i.d(o,"cross",(function(){return Se})),i.d(o,"length",(function(){return _e})),i.d(o,"rotate90",(function(){return Le})),i.d(o,"normalize",(function(){return Oe})),i.d(o,"invert",(function(){return $e})),i.d(o,"rotate",(function(){return je})),i.d(o,"project",(function(){return Fe})),i.d(o,"equal",(function(){return Ee}));var r={};i.r(r),i.d(r,"fromSegment",(function(){return Ie})),i.d(r,"toStandard",(function(){return Ke})),i.d(r,"intersectLine",(function(){return Qe}));var a={};i.r(a),i.d(a,"translate",(function(){return be})),i.d(a,"toLeftOfSegment",(function(){return Ae})),i.d(a,"rotate",(function(){return Be})),i.d(a,"project",(function(){return Me})),i.d(a,"distanceToPoint",(function(){return ze})),i.d(a,"distanceToLine",(function(){return Ve})),i.d(a,"distanceToSegment",(function(){return Xe})),i.d(a,"equal",(function(){return Ye}));var s={};i.r(s),i.d(s,"install",(function(){return vn}));var l={};i.r(l),i.d(l,"install",(function(){return wn}));var c={};i.r(c),i.d(c,"install",(function(){return xn}));var u={};i.r(u),i.d(u,"install",(function(){return jn}));var p={};i.r(p),i.d(p,"SingleDoor",(function(){return En})),i.d(p,"DoubleDoor",(function(){return An})),i.d(p,"SlidingDoor",(function(){return Bn})),i.d(p,"ParentDoor",(function(){return Mn})),i.d(p,"Bealock",(function(){return zn}));var d={};i.r(d),i.d(d,"BasicWindow",(function(){return Vn})),i.d(d,"BoilerWindow",(function(){return In})),i.d(d,"FloorWindow",(function(){return Gn})),i.d(d,"LWindow",(function(){return Hn})),i.d(d,"UWindow",(function(){return Un})),i.d(d,"LBoilerWindow",(function(){return qn})),i.d(d,"UBoilerWindow",(function(){return Kn}));var f={};i.r(f),i.d(f,"install",(function(){return Qn}));var h={};i.r(h),i.d(h,"install",(function(){return Yn}));var m={};i.r(m),i.d(m,"isHouse",(function(){return eo})),i.d(m,"isDrawing",(function(){return io})),i.d(m,"fromHouse",(function(){return no}));var g,v=i("d198"),b=i("7580"),y=(i("e260"),i("e6cf"),i("cca6"),i("a79d"),i("d81d"),i("d9e2"),i("1227"),i("2b0e")),w=i("5f5b"),x=i("b1e0"),k=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex flex-column position-relative w-100 h-100",attrs:{id:"app"}},[i("div",[i("app-menu")],1),i("div",{staticClass:"d-flex flex-fill w-100"},[i("div",[i("app-tool-bar")],1),i("div",{staticClass:"h-100 w-100 overflow-hidden position-relative"},[i("div",{ref:"drawing",staticClass:"w-100 h-100",staticStyle:{"line-height":"0"},on:{dblclick:t.useTransformerFromSelector}}),i("app-tool-setting"),i("app-property-card"),i("div",{staticClass:"position-absolute",staticStyle:{right:"20px",bottom:"40px"}},[i("app-viewport")],1),i("div",{staticClass:"position-absolute",staticStyle:{left:"40px",bottom:"40px"}},[i("app-visible")],1)],1),i("div",[i("app-property")],1)])])},T=[],S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex justify-content-between align-items-center border-bottom",staticStyle:{height:"76px"},attrs:{id:"menu"}},[i("div",{staticClass:"d-flex align-items-center px-3 font-weight-bold",staticStyle:{height:"50px","line-height":"50px"}},[i("b-img",{staticClass:"mr-3",staticStyle:{width:"30px"},attrs:{src:"img/House.svg"}}),i("span",[t._v("模型名称")])],1),i("div",{staticClass:"d-flex align-items-center"},t._l(t.toolListGroup,(function(e,n){return i("div",{key:n,staticClass:"d-flex align-items-center"},[t._l(e,(function(e,n){return i("b-button",{directives:[{name:"show",rawName:"v-show",value:!e.show||!e.show(),expression:"tool.show ? !tool.show() : true"}],key:n,staticClass:"menu-btn",class:{"btn-active":e.id===t.activeTool},attrs:{disabled:!!e.disabled&&e.disabled(),variant:"outline-secondary"},on:{click:e.method}},[i("b-img",{staticStyle:{width:"30px"},attrs:{src:e.id===t.activeTool&&e.active?e.active:e.src}}),i("span",{staticClass:"mt-1"},[t._v(t._s(e.title))])],1)})),n<t.toolListGroup.length-1?i("div",{staticClass:"border-left",staticStyle:{height:"50px"}}):t._e()],2)})),0),i("div",[i("b-button",{staticClass:"menu-btn",attrs:{variant:"outline-secondary"},on:{click:t.showExitModal}},[i("b-img",{staticStyle:{width:"30px"},attrs:{src:"img/Quit.svg"}}),i("span",{staticClass:"mt-1"},[t._v("退出")])],1)],1),i("b-modal",{attrs:{id:"clear-modal",title:"一键清空","hide-footer":"",size:"sm"}},[i("div",{staticClass:"d-block text-center mt-3 mb-4"},[t._v("您确定要清空当前楼层的户型图")]),i("div",{staticClass:"d-flex justify-content-center align-items-center"},[i("b-button",{staticClass:"mt-0 mr-3",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("clear-modal")}}},[t._v("取消")]),i("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"danger"},on:{click:t.clear}},[t._v("确定")])],1)]),i("b-modal",{attrs:{id:"exit-modal",title:"退出","hide-footer":"",size:"sm"}},[i("div",{staticClass:"d-block text-center mt-3 mb-4"},[t._v("您是否要退出户型图绘制工具")]),i("div",{staticClass:"d-flex justify-content-center align-items-center"},[i("b-button",{staticClass:"mt-0 mr-3",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("exit-modal")}}},[t._v("取消")]),i("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"danger"},on:{click:t.exit}},[t._v("确定")])],1)])],1)},C=[],_=6e5,L={data:function(){return{activeTool:"selector",toolListGroup:[[{id:"selector",title:"选择",src:"img/Pointer.svg",active:"img/Pointer_Active.svg",method:this.select},{id:"transformer",title:"移动",src:"img/Move.svg",active:"img/Move_Active.svg",method:this.move}],[{title:"保存",src:"img/Save.svg",method:this.save},{title:"清空",src:"img/Clear.svg",method:this.showClearModal},{title:"锁定",src:"img/Lock.svg",method:this.lock,show:this.getLockShow},{title:"解锁",src:"img/Lock.svg",method:this.unlock,show:this.getUnlockShow,disabled:this.getLockDisabled}]],locked:!1,hasWall:!1}},mounted:function(){this.init(),this.autoSave()},destroyed:function(){var t=this.$editor;this.$root.$off("floorChange",this._floorChangeListener),t.off("tool-open",this._openListener),t.off("wall-create",this._wallCreateListener),t.off("wall-destroy",this._wallDestroyListener)},methods:{init:function(){var t=this,e=this.$editor;this.$root.$on("floorChange",this._floorChangeListener=function(e){t.locked=e.locked}),e.on("tool-open",this._openListener=function(e){t.activeTool!==e&&(t.activeTool=e)}),e.on("wall-create",this._wallCreateListener=function(){t.hasWall=!0,t.locked||t.lock(!0)}),e.on("wall-destroy",this._wallDestroyListener=function(){0===e.solution.drawing.structure.getAllWallList().length&&(t.hasWall=!1,t.unlock())})},getLockShow:function(){return this.locked},getUnlockShow:function(){return!this.locked},getLockDisabled:function(){return this.hasWall},select:function(){this.$editor.feature.tool.openSelector()},move:function(){this.$editor.feature.tool.openTransformer()},save:function(){var t=this;this.$editor.feature.floor.updateFloorData(),this.$editor.feature.floor.save().then((function(){t.$bvToast.toast("保存成功",{autoHideDelay:2e3,noHoverPause:!0,toastClass:"custom-toast",variant:"default"})}))},autoSave:function(){var t=this;setTimeout((function(){t.$bvToast.toast("自动保存成功...",{autoHideDelay:2e3,noHoverPause:!0,toastClass:"custom-toast",variant:"default"}),t.autoSave()}),_)},retreat:function(){console.log("retreat")},advance:function(){console.log("advance")},showClearModal:function(){this.$bvModal.show("clear-modal")},clear:function(){this.$editor.feature.floor.clear(),this.$bvModal.hide("clear-modal"),this.locked&&this.unlock()},lock:function(t){var e=t?"底图已锁定，清空当前层户型图后可解锁":"底图已锁定";this.locked=!0,this.$bvToast.toast(e,{autoHideDelay:2e3,noHoverPause:!0,toastClass:"custom-toast",variant:"default"}),this.$root.$emit("lock")},unlock:function(){this.locked=!1,this.$root.$emit("unlock")},showExitModal:function(){this.$bvModal.show("exit-modal")},exit:function(){var t=this;this.$editor.feature.floor.updateFloorData(),this.$editor.feature.floor.save().then((function(){t.$bvModal.hide("exit-modal"),window.close()}))}}},O=L,$=(i("bb78"),i("0c7c")),j=Object($["a"])(O,S,C,!1,null,null,null),F=j.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"h-100 border-right d-flex",attrs:{id:"tool-bar-container"}},[i("b-button-toolbar",{staticClass:"flex-column border-right",staticStyle:{width:"68px","font-size":"12px"},attrs:{id:"app-toolgroup"}},t._l(t.toolList,(function(e,n){return i("b-button-group",{key:n,staticClass:"p-1"},[i("b-button",{staticClass:"d-flex flex-column align-items-center p-1 border-0",class:{"btn-active":e.id===t.active},attrs:{variant:"outline-secondary"},on:{click:function(i){return t.changeTool(e.id)}}},[i("b-img",{staticStyle:{width:"30px"},attrs:{src:e.id===t.active?e.active:e.img}}),i("span",{staticClass:"app-text-tiny mt-1"},[t._v(t._s(e.title))])],1)],1)})),1),i("div",{staticClass:"tool-bar-content"},[i("span",{staticClass:"content-button",on:{click:t.toggleConetnt}},[i("b-icon",{attrs:{icon:t.contentVisible?"chevron-left":"chevron-right"}})],1),i(t.activeTool,{tag:"component",staticClass:"content-component",class:{hidden:!t.contentVisible}})],1)],1)},R=[],W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex flex-column",attrs:{id:"tool"}},[t._l(t.toolGroup,(function(e,n){return i("div",{key:e.title+n,staticClass:"px-2"},[i("div",{staticClass:"border-bottom px-2",staticStyle:{height:"30px","line-height":"30px"}},[t._v(t._s(e.title))]),i("div",{staticClass:"d-flex flex-wrap pt-2"},t._l(e.toolList,(function(e,n){return i("div",{key:e+n,staticClass:"tool-item",class:{"no-margin-right":(n+1)%3===0,"btn-active":t.toolGroupMap[e].id===t.activeToolGroup},on:{click:function(i){return t.activeTool(e)}}},[i("span",{staticStyle:{width:"40px",height:"40px","line-height":"40px"}},[i("b-img",{staticClass:"w-100 h-100",attrs:{src:t.toolGroupMap[e].id===t.activeToolGroup&&t.toolGroupMap[e].active?t.toolGroupMap[e].active:t.toolGroupMap[e].img}})],1),i("span",{staticClass:"mt-2 app-text-tiny text-center"},[t._v(t._s(t.toolGroupMap[e].title))])])})),0)])})),t._l(t.windoorGroup,(function(e,n){return i("div",{key:e.title+n,staticClass:"px-2"},[i("div",{staticClass:"border-bottom px-2",staticStyle:{height:"30px","line-height":"30px"}},[t._v(t._s(e.title))]),i("div",{staticClass:"d-flex flex-wrap pt-3"},t._l(e.toolList,(function(e,n){return i("div",{key:e+n,staticClass:"tool-item",class:{"no-margin-right":(n+1)%3===0},on:{click:function(i){return t.activeWindoor(e)}}},[i("span",{staticStyle:{width:"40px",height:"40px","line-height":"40px"}},[i("b-img",{staticClass:"w-100 h-100",attrs:{src:t.windoorMap[e].img}})],1),i("span",{staticClass:"mt-1 app-text-tiny text-center"},[t._v(t._s(t.windoorMap[e].title))])])})),0)])}))],2)},N=[],P=i("2fe6"),E="selector",A="transformer",B="builder",M="chamber",z="spliter",V="labeler",I="viewport",G=(g={},Object(P["a"])(g,E,{id:E,title:"选择器",icon:"cursor",click:function(t){t.feature.tool.openSelector()}}),Object(P["a"])(g,A,{id:A,title:"变形器",icon:"arrows-move",click:function(t){t.feature.tool.openTransformer()}}),Object(P["a"])(g,B,{id:B,title:"画墙",img:"img/Wall.svg",active:"img/Wall_Active.svg",click:function(t){t.feature.tool.openBuilder()}}),Object(P["a"])(g,M,{id:M,title:"画房间",img:"img/Room.svg",active:"img/Room_Active.svg",click:function(t){t.feature.tool.openChamber()}}),Object(P["a"])(g,z,{id:z,title:"截断器",icon:"input-cursor",click:function(t){t.feature.tool.openSpliter()}}),Object(P["a"])(g,V,{id:V,title:"标注",icon:"tags",click:function(t){t.feature.tool.openLabeler()}}),Object(P["a"])(g,I,{id:I,title:"视口",icon:"search",click:function(t){t.feature.tool.openViewport()}}),g),H={singleDoor:{id:"singleDoor",title:"单开门",img:"img/SingleDoor.svg"},doubleDoor:{id:"doubleDoor",title:"双开门",img:"img/DoubleDoor.svg"},slidingDoor:{id:"slidingDoor",title:"推拉门",img:"img/SlidingDoor.svg"},basicWindow:{id:"basicWindow",title:"普通窗",img:"img/BasicWindow.svg"},boilerWindow:{id:"boilerWindow",title:"一字飘窗",img:"img/BoilerWindow.svg"},bealock:{id:"bealock",title:"垭口",img:"img/Bealock.svg"}},U=[{title:"画墙",toolList:[B,M]}],q=[{title:"门窗",toolList:["singleDoor","doubleDoor","slidingDoor","basicWindow","boilerWindow"]},{title:"其他构件",toolList:["bealock"]}],K={name:"Tool",data:function(){return{activeToolGroup:null,toolGroup:U,windoorGroup:q,toolGroupMap:G,windoorMap:H}},mounted:function(){var t=this;this.activeTool(E),this.$editor.on("tool-open",this._toolOpenListener=function(e){t.activeToolGroup!==e&&(t.activeToolGroup=e,t.$root.$emit("toolGroupChange",e))})},destroyed:function(){this.$editor.off("open",this._toolOpenListener)},methods:{activeTool:function(t){G[t].click(this.$editor),this.activeToolGroup=t,this.$root.$emit("toolGroupChange",t)},activeWindoor:function(t){this.$editor.feature.tool.openDefault(),this.$editor.solution.drawing.windoor.createMovingHollow(t)}}},J=K,Q=(i("6db6"),Object($["a"])(J,W,N,!1,null,null,null)),X=Q.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"tool-bar-material"}},[i("b-tabs",{staticClass:"p-2",attrs:{pills:"","no-fade":"","nav-class":"material-tab-nav"}},t._l(t.materialGroup,(function(e,n){return i("b-tab",{key:n,attrs:{title:e.title,active:e.active}},t._l(e.dataList,(function(e,n){return i("div",{key:n},[i("div",{staticClass:"border-bottom px-2",staticStyle:{height:"30px","line-height":"30px"}},[t._v(t._s(e.title))]),i("div",{staticClass:"d-flex flex-wrap pt-3"},t._l(e.materialList,(function(e,n){return i("div",{key:n,staticClass:"d-flex flex-column align-items-center mb-2",staticStyle:{width:"50px"},on:{click:function(i){return t.create(t.materialMap[e].id)}}},[i("span",{staticStyle:{width:"40px",height:"40px",cursor:"pointer"}},[i("b-img",{staticClass:"h-100 w-100",attrs:{src:t.materialMap[e].img}})],1),i("span",{staticClass:"mt-1 app-text-tiny text-center"},[t._v(t._s(t.materialMap[e].title))])])})),0)])})),0)})),1)],1)},Z=[],tt={0:{id:0,title:"单人床",img:"img/SingleDoor.png"},1:{id:1,title:"双人床",img:"img/SingleDoor.png"},2:{id:2,title:"组合床",img:"img/SingleDoor.png"},3:{id:3,title:"榻榻米",img:"img/SingleDoor.png"},4:{id:4,title:"单人沙发",img:"img/SingleDoor.png"},5:{id:5,title:"双人沙发",img:"img/SingleDoor.png"},6:{id:6,title:"多人沙发",img:"img/SingleDoor.png"},7:{id:7,title:"组合沙发",img:"img/SingleDoor.png"},8:{id:8,title:"转角沙发",img:"img/SingleDoor.png"},9:{id:9,title:"弧形沙发",img:"img/SingleDoor.png"},10:{id:10,title:"圆形餐桌",img:"img/SingleDoor.png"},11:{id:11,title:"方形餐桌",img:"img/SingleDoor.png"},12:{id:12,title:"长条形餐桌",img:"img/SingleDoor.png"},13:{id:13,title:"书桌",img:"img/SingleDoor.png"},14:{id:14,title:"梳妆台",img:"img/SingleDoor.png"},15:{id:15,title:"一字型橱柜",img:"img/SingleDoor.png"},16:{id:16,title:"L形橱柜",img:"img/SingleDoor.png"},17:{id:17,title:"U形橱柜",img:"img/SingleDoor.png"},18:{id:18,title:"浴缸",img:"img/SingleDoor.png"},19:{id:19,title:"淋浴房",img:"img/SingleDoor.png"},20:{id:20,title:"洗手台",img:"img/SingleDoor.png"},21:{id:21,title:"马桶",img:"img/SingleDoor.png"},22:{id:22,title:"洗衣机",img:"img/SingleDoor.png"},23:{id:23,title:"绿植",img:"img/SingleDoor.png"},24:{id:24,title:"地毯",img:"img/SingleDoor.png"},25:{id:25,title:"长方形楼梯",img:"img/SingleDoor.png"},26:{id:26,title:"L形楼梯",img:"img/SingleDoor.png"},27:{id:27,title:"U形楼梯",img:"img/SingleDoor.png"},28:{id:28,title:"圆形楼梯",img:"img/SingleDoor.png"},29:{id:29,title:"地板",img:"img/SingleDoor.png"},30:{id:30,title:"瓷砖",img:"img/SingleDoor.png"},31:{id:31,title:"地毯",img:"img/SingleDoor.png"}},et=[{title:"家具",dataList:[{title:"床",materialList:[0,1,2,3]},{title:"沙发",materialList:[4,5,6,7,8,9]},{title:"桌几",materialList:[10,11,12,13,14]}]},{title:"厨卫",dataList:[{title:"厨房",materialList:[15,16,17]},{title:"卫浴",materialList:[18,19,20,21,22]}]},{title:"家饰",dataList:[{title:"家饰",materialList:[23,24]}]},{title:"建筑",dataList:[{title:"楼梯",materialList:[25,26,27,28]},{title:"地板设计",materialList:[29,30,31]}]}],it={name:"Material",data:function(){return{materialMap:tt,materialGroup:et}},mounted:function(){console.log("material")},methods:{create:function(t){console.log(t)}}},nt=it,ot=(i("9342"),Object($["a"])(nt,Y,Z,!1,null,null,null)),rt=ot.exports,at={tool:X,material:rt},st={name:"ToolBarContainer",data:function(){return{toolList:[{id:"tool",title:"绘制工具",img:"img/DrawTool.svg",active:"img/DrawTool_Active.svg"}],active:"tool",activeTool:X,contentVisible:!0}},methods:{changeTool:function(t){this.active=t,this.activeTool=at[t],this.contentVisible||this.toggleConetnt()},toggleConetnt:function(){var t=this.$editor.solution.drawing;console.log(this.$editor.solution.drawing),this.contentVisible=!this.contentVisible,t.setOrigin(t.origin[0]+(this.contentVisible?-200:200),t.origin[1]),this.$root.$emit("drawing-resize")}}},lt=st,ct=(i("0085"),Object($["a"])(lt,D,R,!1,null,null,null)),ut=ct.exports,pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"position-absolute d-flex justify-content-center w-100",staticStyle:{top:"0",height:"0"}},[i(t.current,{tag:"component",staticClass:"border mt-1 position-absolute",staticStyle:{"background-color":"#FFF"}})],1)},dt=[],ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex",attrs:{id:"builder-setting"}},[i("b-form-radio-group",{staticClass:"d-flex align-items-center pr-1 pl-3",attrs:{options:t.alignOptions},on:{change:t.setWallAlignment},model:{value:t.align,callback:function(e){t.align=e},expression:"align"}}),i("div",{staticClass:"position-relative"},[i("b-form-group",{staticClass:"my-1 px-2 border-left border-right",staticStyle:{width:"12em"},attrs:{"label-cols-sm":"3","content-cols-sm":"9",label:"墙厚","label-for":"wall-thinkness"}},[i("b-input-group",{attrs:{append:"mm"}},[i("b-form-input",{attrs:{id:"wall-thinkness",type:"number",autocomplete:"off"},on:{change:t.setWallThinkness,focus:function(){return t.thinknessDropdownShow=!0},blur:function(){return t.thinknessDropdownShow=!1}},model:{value:t.thinkness,callback:function(e){t.thinkness=t._n(e)},expression:"thinkness"}})],1)],1),i("b-list-group",{directives:[{name:"show",rawName:"v-show",value:t.thinknessDropdownShow,expression:"thinknessDropdownShow"}],staticClass:"input-dropdown"},t._l(t.thinknessList,(function(e,n){return i("b-list-group-item",{key:n,attrs:{button:""},on:{mousedown:function(i){return t.setWallThinkness(e)}}},[t._v(t._s(e))])})),1)],1),i("b-form-checkbox",{staticClass:"d-flex align-items-center mx-3",on:{change:t.setSnapState},model:{value:t.snapState,callback:function(e){t.snapState=e},expression:"snapState"}},[t._v("吸附")])],1)},ht=[],mt=(i("a9e3"),10),gt=1e3,vt={name:"BuilderSetting",data:function(){return{thinkness:240,thinknessList:[100,120,180,200,240],thinknessDropdownShow:!1,align:"center",alignOptions:[{value:"center",text:"墙中线绘制"},{value:"right",text:"墙内线绘制"}],snapState:!0}},mounted:function(){this.setWallThinkness(this.thinkness),this.setWallAlignment(this.align),this.snapState=this.$editor.getState().snap},methods:{setWallThinkness:function(t){var e=Number(t);this.thinkness=e<mt?10:e>gt?1e3:Number(t),this.$editor.solution.drawing.bricklayer.Builder.setThickness(this.thinkness)},setWallAlignment:function(t){this.$editor.solution.drawing.bricklayer.Builder.setAlignment(t)},setSnapState:function(t){this.$editor.setSnap(t)}}},bt=vt,yt=(i("7b33"),Object($["a"])(bt,ft,ht,!1,null,null,null)),wt=yt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"d-flex",attrs:{id:"chamber-setting"}},[i("div",[i("b-form-group",{staticClass:"my-1 pr-2 pl-3 border-right",staticStyle:{width:"12em"},attrs:{"label-cols-sm":"3","content-cols-sm":"9",label:"墙厚","label-for":"wall-thinkness"}},[i("b-input-group",{attrs:{append:"mm"}},[i("b-form-input",{attrs:{id:"wall-thinkness",type:"number",autocomplete:"off"},on:{change:t.setWallThinkness,focus:function(){return t.thinknessDropdownShow=!0},blur:function(){return t.thinknessDropdownShow=!1}},model:{value:t.thinkness,callback:function(e){t.thinkness=t._n(e)},expression:"thinkness"}})],1)],1),i("b-list-group",{directives:[{name:"show",rawName:"v-show",value:t.thinknessDropdownShow,expression:"thinknessDropdownShow"}],staticClass:"input-dropdown"},t._l(t.thinknessList,(function(e,n){return i("b-list-group-item",{key:n,attrs:{button:""},on:{mousedown:function(i){return t.setWallThinkness(e)}}},[t._v(t._s(e))])})),1)],1),i("b-form-checkbox",{staticClass:"d-flex align-items-center mx-3",on:{change:t.setSnapState},model:{value:t.snapState,callback:function(e){t.snapState=e},expression:"snapState"}},[t._v("吸附")])],1)},kt=[],Tt=10,St=1e3,Ct={name:"ChamberSetting",data:function(){return{thinkness:240,thinknessList:[100,120,180,200,240],thinknessDropdownShow:!1,snapState:!0}},mounted:function(){this.setWallThinkness(this.thinkness),this.snapState=this.$editor.getState().snap},methods:{setWallThinkness:function(t){var e=Number(t);this.thinkness=e<Tt?10:e>St?1e3:Number(t),this.$editor.solution.drawing.bricklayer.Chamber.setThickness(this.thinkness)},setSnapState:function(t){this.$editor.setSnap(t)}}},_t=Ct,Lt=(i("698f"),Object($["a"])(_t,xt,kt,!1,null,null,null)),Ot=Lt.exports,$t={builder:wt,chamber:Ot},jt={name:"ToolSetting",data:function(){return{current:null}},mounted:function(){var t=this;this.$root.$on("toolGroupChange",(function(e){t.current=$t[e]}))}},Ft=jt,Dt=Object($["a"])(Ft,pt,dt,!1,null,null,null),Rt=Dt.exports,Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"border-left",attrs:{id:"property-container"}},[i("span",{staticClass:"property-button",on:{click:t.toggleConetnt}},[i("b-icon",{attrs:{icon:t.contentVisible?"chevron-right":"chevron-left"}})],1),i("div",{staticClass:"property-content",class:{hidden:!t.contentVisible}},[i("floor",{staticClass:"mb-3"}),i(t.activeTool,{tag:"component"})],1)])},Nt=[],Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"property-floor"}},[i("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v("户型属性")]),i("div",{staticClass:"d-flex flex-column app-text-tiny px-3"},[i("div",{staticClass:"property-item"},[i("span",[t._v("底图旋转：")]),i("div",{staticClass:"position-relative"},[i("b-form-input",{staticClass:"spin-input spin-button-hidden",staticStyle:{width:"39px",left:"36px"},attrs:{type:"number",readonly:t.bitmapLocked},on:{change:t.bitmapRotate},model:{value:t.property.bitmapRotation,callback:function(e){t.$set(t.property,"bitmapRotation",e)},expression:"property.bitmapRotation"}}),i("b-form-spinbutton",{staticClass:"mr-2",attrs:{inline:"",wrap:"",min:"0",max:"359",readonly:t.bitmapLocked},on:{change:function(e){return t.rotationUpdate("bitmap",e)}},model:{value:t.spinNumber.bitmapRotation,callback:function(e){t.$set(t.spinNumber,"bitmapRotation",e)},expression:"spinNumber.bitmapRotation"}}),i("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-repeat","font-scale":"1.5"},on:{click:function(e){return t.bitmapRotate(0)}}})],1)]),i("div",{staticClass:"property-item"},[i("span",[t._v("指北针：")]),i("div",{staticClass:"position-relative"},[i("b-form-input",{staticClass:"position-absolute rounded-0 border-left-0 border-right-0 text-center spin-button-hidden",staticStyle:{width:"39px",left:"36px"},attrs:{type:"number"},on:{change:t.compassRotate},model:{value:t.property.compassRotation,callback:function(e){t.$set(t.property,"compassRotation",e)},expression:"property.compassRotation"}}),i("b-form-spinbutton",{staticClass:"mr-2",attrs:{inline:"",wrap:"",min:"0",max:"359"},on:{change:function(e){return t.rotationUpdate("compass",e)}},model:{value:t.spinNumber.compassRotation,callback:function(e){t.$set(t.spinNumber,"compassRotation",e)},expression:"spinNumber.compassRotation"}}),i("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-repeat","font-scale":"1.5"},on:{click:function(e){return t.compassRotate(0)}}})],1)]),i("div",{staticClass:"property-item"},[i("span",[t._v("楼层数量：")]),i("b-form-input",{staticStyle:{width:"137px"},attrs:{readonly:""},model:{value:t.property.length,callback:function(e){t.$set(t.property,"length",e)},expression:"property.length"}})],1),i("div",{staticClass:"property-item"},[i("span",[t._v("楼层选择：")]),i("b-form-select",{staticStyle:{width:"137px"},attrs:{options:t.floorOptions},on:{change:t.changeFloor},model:{value:t.selectedFloor,callback:function(e){t.selectedFloor=e},expression:"selectedFloor"}})],1),i("div",{staticClass:"property-item"},[i("span",[t._v("名称修改：")]),i("b-form-input",{staticStyle:{width:"137px"},attrs:{state:t.floorNameChangeState},on:{change:t.changeFloorName},model:{value:t.property.floorName,callback:function(e){t.$set(t.property,"floorName",e)},expression:"property.floorName"}})],1),i("div",{staticClass:"property-item"},[i("span",[t._v("户型面积（单层）：")]),i("div",{staticClass:"d-flex align-items-center"},[i("b-form-input",{staticClass:"mr-1",staticStyle:{width:"118px"},attrs:{readonly:""},model:{value:t.layerArea,callback:function(e){t.layerArea=e},expression:"layerArea"}}),i("span",[t._v("m²")])],1)])])])},Et=[],At=(i("b680"),i("caad"),i("2532"),i("a434"),i("7db0"),i("d3b7"),i("b0c0"),function(t){return(t/1e6).toFixed(2)}),Bt=function(t){return t/Math.PI/2*360},Mt=function(t){return t/360*2*Math.PI},zt={name:"FloorProperty",data:function(){return{floorOptions:[],property:{length:0,floorName:"",bitmapRotation:0,compassRotation:0},spinNumber:{bitmapRotation:0,compassRotation:0},selectedFloor:1,layerArea:0,floorNameChangeState:null,lockedFloor:[]}},computed:{bitmapLocked:function(){return this.lockedFloor.includes(this.selectedFloor)}},mounted:function(){var t=this,e=this.$editor;e.on("floor-set",this._floorSetListener=function(){t.updateFloorOptions(),t.updateProperty()}),e.on("area-change",this._areaListener=function(e){return t.layerArea=At(e)}),e.on("compass-change",this._compassListener=function(e){t.spinNumber.compassRotation=t.property.compassRotation=Number(Bt(e.rotation).toFixed())}),e.on("bitmap-create",this._bitmapListener=function(){return t.updateProperty()}),this.$root.$on("lock",(function(){t.bitmapLocked||t.lockedFloor.push(t.selectedFloor)})),this.$root.$on("unlock",(function(){t.bitmapLocked&&t.lockedFloor.splice(t.lockedFloor.indexOf(t.selectedFloor),1)}))},destroyed:function(){var t=this.$editor;t.off("floor-set",this._floorSetListener),t.off("area-change",this._areaListener),t.off("compass-change",this._compassListener),t.off("bitmap-create",this._bitmapListener)},methods:{compassRotate:function(t){this.property.compassRotation=t<0?0:t>359?359:Number(t),this.$editor.solution.drawing.compass.setRotation(Mt(this.property.compassRotation))},bitmapRotate:function(t){if(!this.bitmapLocked){var e=this.$editor.solution.drawing.negative.getAllBitmapList();this.property.bitmapRotation=t<0?0:t>359?359:Number(t),this.spinNumber.bitmapRotation=Number(this.property.bitmapRotation),e[0]&&e[0].setRotation(Mt(this.property.bitmapRotation))}},rotationUpdate:function(t,e){this.property["".concat(t,"Rotation")]=e,this["".concat(t,"Rotate")](e)},changeFloor:function(t){this.$editor.feature.floor.select(t),this.updateProperty(),this.selectedFloor=t,this.$root.$emit("floorChange",{locked:this.bitmapLocked})},changeFloorName:function(){var t=this,e=this.property.floorName;e?(this.$editor.feature.floor.setFloorName(e),this.floorOptions.find((function(e){return e.level===t.selectedFloor})).text=e):(this.$editor.feature.floor.setFloorName(""),this.property.floorName="",this.updateFloorOptions()),this.floorNameChangeState=!0},updateProperty:function(){var t=this.$editor.solution.drawing,e=this.$editor.feature.floor,i=e.currentFloor,n=t.negative.getAllBitmapList();this.property.length=e.length,this.property.floorName=i?i.name:"",this.property.compassRotation=Bt(t.compass.rotation),this.property.bitmapRotation=n[0]?Bt(n[0].rotation):0,this.selectedFloor=e.current,this.floorNameChangeState=null},updateFloorOptions:function(){var t=this.$editor.feature.floor.getData();this.floorOptions=t.list.map((function(t){return{level:t.level,text:t.name||"".concat(t.level,"层"),value:t.level}}))}}},Vt=zt,It=(i("4c00"),Object($["a"])(Vt,Pt,Et,!1,null,null,null)),Gt=It.exports,Ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"property-room"}},[i("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v("功能间信息")]),i("div",{staticClass:"app-text-tiny px-3"},[i("div",{staticClass:"property-item"},[i("span",[t._v("房间类型：")]),i("b-form-select",{staticStyle:{width:"137px"},attrs:{options:t.options},on:{change:t.changeRoomType},model:{value:t.property.type,callback:function(e){t.$set(t.property,"type",e)},expression:"property.type"}})],1),i("div",{staticClass:"property-item"},[i("span",[t._v("房间名称：")]),i("b-form-input",{staticStyle:{width:"137px"},on:{change:t.changeRoomName},model:{value:t.property.name,callback:function(e){t.$set(t.property,"name",e)},expression:"property.name"}})],1)])])},Ut=[],qt=["客厅","餐厅","客餐厅","厨房","主卧","次卧","卧室","老人房","儿童房","过道","阳台","卫生间","玄关","地下室"],Kt=null,Jt={name:"PropertyRoom",data:function(){return{property:{type:"",name:""}}},computed:{options:function(){var t=qt.map((function(t){return{value:t,text:t}}));return t.unshift({value:"自定义",text:"自定义"}),t}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener),this.$root.$off("room-property-change",this._changeListener)},methods:{init:function(){var t=this,e=this.$editor;Kt=e.getSelected()[0],this.updateProperty(Kt),e.on("select",this._selectListener=function(e){var i=e[0];i!==Kt&&i.constructor===Kt.constructor&&(Kt=i,t.updateProperty(i))}),this.$root.$on("room-property-change",this._changeListener=function(){return t.updateProperty(Kt)})},updateProperty:function(t){var e=t.type,i=t.name;Object.assign(this.property,{type:e||"自定义",name:i||""})},changeRoomType:function(){this.property.name=this.property.type,Kt.setType(this.property.type),Kt.setName(this.property.name),this.$root.$emit("room-property-change")},changeRoomName:function(){Kt.setName(this.property.name||"未命名"),this.$root.$emit("room-property-change")}}},Qt=Jt,Xt=(i("783f"),Object($["a"])(Qt,Ht,Ut,!1,null,null,null)),Yt=Xt.exports,Zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"property-wall"}},[i("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v("基础参数（墙体）")]),i("div",{staticClass:"app-text-small px-3"},[i("div",[i("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v("墙体类型：")]),i("b-form-radio-group",{staticClass:"wall-type-radio",attrs:{options:t.wallTypeOptions,buttons:"","button-variant":"outline-secondary"},on:{change:t.setType},model:{value:t.property.type,callback:function(e){t.$set(t.property,"type",e)},expression:"property.type"}})],1),i("div",[i("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v("墙体参数：")]),i("div",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"app-text-tiny",staticStyle:{width:"50px"}},[t._v("厚度")]),i("b-form-input",{staticClass:"mx-2",attrs:{min:"10",max:"1000",type:"range"},on:{update:t.setThickness},model:{value:t.property.thickness,callback:function(e){t.$set(t.property,"thickness",e)},expression:"property.thickness"}}),i("b-form-input",{staticClass:"mr-1",staticStyle:{width:"60px"},attrs:{min:"10",max:"1000"},on:{change:t.setThickness},model:{value:t.property.thickness,callback:function(e){t.$set(t.property,"thickness",e)},expression:"property.thickness"}}),i("span",[t._v("mm")])],1)])])])},te=[],ee=null,ie={name:"PropertyWall",data:function(){return{property:{thickness:0,type:""},wallTypeOptions:[{text:"普通墙",value:"common"},{text:"承重墙",value:"bearing"},{text:"矮墙",value:"short"}]}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this,e=this.$editor;ee=e.getSelected()[0],this.updateProperty(ee),e.on("select",this._selectListener=function(e){var i=e[0];i!==ee&&i.constructor===ee.constructor&&(ee=i,t.updateProperty(i))})},updateProperty:function(t){var e=t.thickness,i=t.type;Object.assign(this.property,{thickness:e.toFixed(),type:i||"common"})},setType:function(t){ee.setType(t)},setThickness:function(t){isNaN(Number(t))?this.property.thickness=100:ee.thickness=Number(t)}}},ne=ie,oe=(i("687c"),Object($["a"])(ne,Zt,te,!1,null,null,null)),re=oe.exports,ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"property-hollow"}},[i("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v(t._s("基础参数（"+t.typeName+"）"))]),i("div",{staticClass:"app-text-small px-3"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.hollowTypeOptions.length,expression:"hollowTypeOptions.length"}]},[i("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v(t._s(t.typeName+"类型："))]),i("b-form-radio-group",{staticClass:"type-radio",attrs:{options:t.hollowTypeOptions,buttons:"","button-variant":"outline-secondary"},on:{change:t.setType},model:{value:t.property.type,callback:function(e){t.$set(t.property,"type",e)},expression:"property.type"}})],1),i("div",[i("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v(t._s(t.typeName+"参数："))]),i("div",{staticClass:"d-flex align-items-center"},[i("div",{staticClass:"app-text-tiny",staticStyle:{width:"50px"}},[t._v("长度")]),i("b-form-input",{staticClass:"mx-2",attrs:{min:"100",max:t.maxWidth,type:"range"},on:{update:t.setWidth},model:{value:t.property.width,callback:function(e){t.$set(t.property,"width",e)},expression:"property.width"}}),i("b-form-input",{staticClass:"mr-1",staticStyle:{width:"60px"},attrs:{min:"100",max:"3000"},on:{change:t.setWidth},model:{value:t.property.width,callback:function(e){t.$set(t.property,"width",e)},expression:"property.width"}}),i("span",[t._v("mm")])],1)]),i("div",{staticClass:"py-3 d-flex flex-row-reverse"},[i("b-button",{attrs:{variant:"primary"},on:{click:t.setDefault}},[t._v("恢复默认")])],1)])])},se=[],le=i("0bd7"),ce=(i("99af"),i("4de4"),i("159b"),Math),ue=(ce.PI,[0,0,1,0]),pe=function(t,e,i,n){return ue[0]=t,ue[1]=e,ue[2]=i,ue[3]=n,ue},de=[0,0],fe=function(t,e){return de[0]=t,de[1]=e,de},he=[0,0,0,0],me=function(t,e,i,n){return he[0]=t,he[1]=e,he[2]=i,he[3]=n,he},ge=[0,0],ve=function(t,e){return ge[0]=t,ge[1]=e,ge},be=function(t,e,i,n){return ve(t+i,e+n)},ye=function(t,e,i,n){return fe(i-t,n-e)},we=ye,xe=ye,ke=function(t,e,i,n){return t*i+e*n},Te=function(t,e,i){return fe(t*i,e*i)},Se=function(t,e,i,n){return t*n-e*i},Ce=i("a326"),_e=function(t,e){return Ce["b"].sqrt(ke(t,e,t,e))},Le=function(t,e){return fe(-e,t)},Oe=function(t,e){var i=_e(t,e);return 0===i&&Ce["a"].throwError("Zero Vector CAN NOT be normalized."),fe(t/i,e/i)},$e=function(t,e){return fe(-t,-e)},je=function(t,e,i){var n=Ce["b"].cos(i),o=Ce["b"].sin(i);return fe(t*n-e*o,t*o+e*n)},Fe=function(t,e,i,n){var o=Oe(i,n);return Te.apply(void 0,Object(le["a"])(o).concat([ke.apply(void 0,[t,e].concat(Object(le["a"])(o)))]))},De=1e-6,Re=function(t){return t<De&&t>-De},We=function(t,e){var i=t-e;return i<De&&i>-De},Ne=function(t,e){return t-e>De},Pe=function(t,e){return t-e<-De},Ee=function(t,e,i,n){return We(t,i)&&We(e,n)},Ae=function(t,e,i,n,r,a){return Ne(Se.apply(o,Object(le["a"])(ye(i,n,r,a)).concat(Object(le["a"])(ye(r,a,t,e)))),0)},Be=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=ye(n,r,t,e);return be.apply(void 0,Object(le["a"])(je.apply(o,Object(le["a"])(a).concat([i]))).concat([n,r]))},Me=function(t,e,i,n,r,a){if(Ye(t,e,i,n))return ve(t,e);var s=ye(t,e,i,n);return Re(Se.apply(o,Object(le["a"])(s).concat([r,a])))?ve(i,n):be.apply(void 0,[t,e].concat(Object(le["a"])(Fe.apply(o,Object(le["a"])(s).concat([r,a])))))},ze=function(t,e,i,n){return _e.apply(o,Object(le["a"])(ye(t,e,i,n)))},Ve=function(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return ze.apply(void 0,[t,e].concat(Object(le["a"])(Me.apply(void 0,[t,e].concat(n)))))},Ie=function(t,e,i,r){var a=we(t,e,i,r),s=Le.apply(o,Object(le["a"])(Oe.apply(o,Object(le["a"])(a)))),l=ke.apply(o,Object(le["a"])(s).concat([t,e])),c=Pe(l,0)?s:$e.apply(o,Object(le["a"])(s));return pe.apply(n,[t,e].concat(Object(le["a"])(c)))},Ge=[0,0,0],He=0,Ue=1,qe=2,Ke=function(t,e,i,n){return Ge[He]=i,Ge[Ue]=n,Ge[qe]=ke(i,n,t,e),Ge},Je=i("26a3"),Qe=function(t,e,i,n,o,r,a,s){var l=Ke(t,e,i,n),c=Object(Je["a"])(l,3),u=c[0],p=c[1],d=c[2],f=Ke(o,r,a,s),h=Object(Je["a"])(f,3),m=h[0],g=h[1],v=h[2],b=u*g-p*m,y=d*g-p*v,w=u*v-d*m;return Re(b)?null:Re(p)?ve(d/u,w/b):Re(g)?ve(v/m,w/b):Re(u)?ve(y/b,d/p):Re(m)?ve(y/b,v/g):ve(y/b,w/b)},Xe=function(t,e,i,n,o,r){return Ve.apply(void 0,[t,e].concat(Object(le["a"])(Ie(i,n,o,r))))},Ye=function(t,e,i,n){return We(t,i)&&We(e,n)},Ze=i("2d58"),ti=i("ac84");var ei=i("0402"),ii=(i("aff5"),function(t,e,i,n){return o.length.apply(o,Object(le["a"])(o.fromBothPoint(t,e,i,n)))}),ni=function(t,e,i){var n=t.corner,o=t.back.corner,s=a.project.apply(a,[e,i].concat(Object(le["a"])(r.fromSegment(n.x,n.y,o.x,o.y))));return ii.apply(void 0,[n.x,n.y].concat(Object(le["a"])(s)))},oi={door:["singleDoor","doubleDoor","slidingDoor"],window:["basicWindow","boilerWindow"],bealock:["bealock"]},ri={door:[{value:"singleDoor",text:"单开门"},{value:"doubleDoor",text:"双开门"},{value:"slidingDoor",text:"推拉门"}],window:[{value:"basicWindow",text:"普通窗"},{value:"boilerWindow",text:"一字飘窗"}],bealock:[]},ai={door:"门",window:"窗",bealock:"垭口"},si=null,li={name:"PropertyHollow",data:function(){return{property:{type:"",width:0},hollowTypeOptions:[],typeName:"",maxWidth:0,aheadTrap:null,behindTrap:null}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this,e=this.$editor;si=e.getSelected()[0],this.updateProperty(si),e.on("select",this._selectListener=function(e){var i=e[0];i!==si&&i.constructor===si.constructor&&(si=i,t.updateProperty(i))})},updateProperty:function(t){var e=t.materialName,i=t.width;for(var n in Object.assign(this.property,{width:i.toFixed(),type:e}),oi)oi[n].includes(e)&&(this.hollowTypeOptions=ri[n],this.typeName=ai[n]);this.updateTrap(t)},updateTrap:function(t){var e=t.surface,i=t.offset;if("virtual"!==e.name){var n=this.$editor.solution.drawing,o=e.back,r=n.windoor.getAllHollowList(),a=r.filter((function(i){return i!==t&&i!==t.$proxy&&i.surface===e})),s=r.filter((function(e){return e!==t&&e!==t.$proxy&&e.surface===o})),l=[],c=ii(e.corner.x,e.corner.y,o.corner.x,o.corner.y);a.forEach((function(t){var e=t.width,i=t.offset;l.push([i-e/2,i+e/2])})),s.forEach((function(t){var e=t.width,i=t.offset;l.push([c-(i+e/2),c-(i-e/2)])})),l.push([0,o.wall===o.next.wall?0:ni.apply(void 0,[e].concat(Object(le["a"])(e.origin)))]),l.push([e.wall===e.next.wall?c:c-ni.apply(void 0,[o].concat(Object(le["a"])(o.origin))),c]);var u=null,p=null;l.forEach((function(t){t[0]>i&&(null===p||t[1]<p[0])&&(p=t),t[1]<i&&(null===u||t[0]>u[1])&&(u=t)})),this.maxWidth=(p[0]-u[1]).toFixed(),this.aheadTrap=u,this.behindTrap=p}else this.maxWidth=1e4},setType:function(t){si.setMaterial(t)},setWidth:function(t){var e=si,i=e.offset,n=e.surface;if(isNaN(Number(t)))return this.property.width=100,void(si.width=100);if("virtual"!==n.name){if(Number(t)>this.maxWidth)return this.property.width=this.maxWidth,void(si.width=Number(this.maxWidth));var o=i-Number(t)/2,r=i+Number(t)/2;si.width=Number(t),o<this.aheadTrap[1]&&(si.offset=i+(this.aheadTrap[1]-o)),r>this.behindTrap[0]&&(si.offset=i-(r-this.behindTrap[0]))}else si.width=Number(t)},setDefault:function(){si.setDefaultWidth()}}},ci=li,ui=(i("14ac"),Object($["a"])(ci,ae,se,!1,null,null,null)),pi=ui.exports,di={name:"Property",components:{Floor:Gt},data:function(){return{activeTool:null,contentVisible:!0}},mounted:function(){this.init()},destroyed:function(){var t=this.$editor;t.off("select",this._selectListener),t.off("select",this._unselectListener)},methods:{init:function(){var t=this,e=this.$editor,i={EditorWall:re,EditorRoom:Yt,EditorHollow:pi};e.on("select",this._selectListener=function(e){t.activeTool=i[e[0].className],t.contentVisible||t.toggleConetnt()}),e.on("unselect",this._unselectListener=function(){t.activeTool=null})},toggleConetnt:function(){this.contentVisible=!this.contentVisible,this.$root.$emit("drawing-resize")}}},fi=di,hi=(i("f709"),Object($["a"])(fi,Wt,Nt,!1,null,null,null)),mi=hi.exports,gi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"property-card"}},[i(t.activeCard,{tag:"component",staticClass:"card-component app-text-tiny"})],1)},vi=[],bi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("span",{staticClass:"mr-2",staticStyle:{width:"25px"}},[t._v("类型")]),i("b-form-select",{staticClass:"mr-2",staticStyle:{width:"100px"},attrs:{options:t.options},on:{change:t.changeRoomType},model:{value:t.property.type,callback:function(e){t.$set(t.property,"type",e)},expression:"property.type"}}),i("b-form-input",{staticStyle:{width:"100px"},attrs:{placeholder:"房间名称"},on:{change:t.changeRoomName},model:{value:t.property.name,callback:function(e){t.$set(t.property,"name",e)},expression:"property.name"}})],1)},yi=[],wi=["客厅","餐厅","客餐厅","厨房","主卧","次卧","卧室","老人房","儿童房","过道","阳台","卫生间","玄关","地下室"],xi=null,ki={name:"PropertyCardRoom",data:function(){return{property:{type:"",name:""}}},computed:{options:function(){var t=wi.map((function(t){return{value:t,text:t}}));return t.unshift({value:"自定义",text:"自定义"}),t}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener),this.$root.$off("room-property-change",this._changeListener)},methods:{init:function(){var t=this,e=this.$editor;xi=e.getSelected()[0],this.updateProperty(xi),e.on("select",this._selectListener=function(e){var i=e[0];i!==xi&&i.constructor===xi.constructor&&(xi=i,t.updateProperty(i))}),this.$root.$on("room-property-change",this._changeListener=function(){return t.updateProperty(xi)})},updateProperty:function(t){var e=t.type,i=t.name;Object.assign(this.property,{type:e||"自定义",name:i||""})},changeRoomType:function(){this.property.name=this.property.type,xi.setType(this.property.type),xi.setName(this.property.name),this.$root.$emit("room-property-change")},changeRoomName:function(){xi.setName(this.property.name||"未命名"),this.$root.$emit("room-property-change")}}},Ti=ki,Si=Object($["a"])(Ti,bi,yi,!1,null,null,null),Ci=Si.exports,_i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.toolList,(function(t,e){return i("b-button",{key:e,attrs:{variant:"outline-secondary",title:t.title},on:{click:t.method}},[i("span",{staticStyle:{height:"25px","line-height":"25px"}},[i("b-img",{staticClass:"w-100",attrs:{src:t.img}})],1)])})),1)},Li=[],Oi=(i("ac1f"),i("1276"),null),$i={name:"PropertyCardWall",data:function(){return{toolList:[{title:"截断",img:"img/Split.svg",method:this.split},{title:"删除",img:"img/Delete.svg",method:this.delete}]}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this.$editor;Oi=t.getSelected()[0],t.on("select",this._selectListener=function(t){var e=t[0];e!==Oi&&e.constructor===Oi.constructor&&(Oi=e)})},split:function(){this.$editor.split(Oi)},delete:function(){this.$editor.delete()}}},ji=$i,Fi=Object($["a"])(ji,_i,Li,!1,null,null,null),Di=Fi.exports,Ri=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",t._l(t.toolList,(function(t,e){return i("b-button",{directives:[{name:"show",rawName:"v-show",value:!t.show||t.show(),expression:"tool.show ? tool.show() : true"}],key:e,attrs:{variant:"outline-secondary",title:t.title},on:{click:t.method}},[i("span",{staticStyle:{height:"25px","line-height":"25px"}},[i("b-img",{staticClass:"w-100",attrs:{src:t.img}})],1)])})),1)},Wi=[],Ni=["singleDoor","doubleDoor","slidingDoor"],Pi=null,Ei={name:"PropertyCardWall",data:function(){return{toolList:[{title:"入户门",img:"img/Entrance.svg",method:this.setEntrance,show:this.getEntranceShow},{title:"墙侧翻转",img:"img/FlipWall.svg",method:this.changeSurface},{title:"翻转",img:"img/Flip.svg",method:this.flip},{title:"删除",img:"img/Delete.svg",method:this.delete}],entranceShow:!0}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this,e=this.$editor;Pi=e.getSelected()[0],this.updateToolList(Pi),e.on("select",this._selectListener=function(e){var i=e[0];i!==Pi&&i.constructor===Pi.constructor&&(Pi=i,t.updateToolList(i))})},getEntranceShow:function(){return this.entranceShow},updateToolList:function(t){this.entranceShow=Ni.includes(t.materialName)},setEntrance:function(){Pi.setEntrance()},changeSurface:function(){Pi.changeSurface()},flip:function(){Pi.flip()},delete:function(){Pi.arrow&&Pi.arrow.remove(),this.$editor.delete()}}},Ai=Ei,Bi=Object($["a"])(Ai,Ri,Wi,!1,null,null,null),Mi=Bi.exports,zi={name:"PropertyCard",data:function(){return{activeCard:null,position:[0,0]}},mounted:function(){this.init()},destroyed:function(){var t=this.$editor;t.off("select",this._selectListener),t.off("unselect",this._unselectListener),document.removeEventListener("mousemove",this._moveListener)},methods:{init:function(){var t=this,e=this.$editor,i=document.getElementById("property-card"),n={EditorWall:Di,EditorRoom:Ci,EditorHollow:Mi};e.on("select",this._selectListener=function(e){t.activeCard=n[e[0].className],i.style.left="".concat(t.position[0]+30,"px"),i.style.top="".concat(t.position[1]-70,"px")}),e.on("unselect",this._unselectListener=function(){t.activeCard=null}),document.addEventListener("mousemove",this._moveListener=function(e){t.position[0]=e.layerX,t.position[1]=e.layerY})}}},Vi=zi,Ii=(i("507d"),Object($["a"])(Vi,gi,vi,!1,null,null,null)),Gi=Ii.exports,Hi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"px-4",attrs:{id:"viewport"}},[i("div",{staticClass:"mr-4",staticStyle:{width:"40px",cursor:"pointer"},on:{click:t.negativeBackToCenter}},[i("b-img",{staticClass:"h-100 w-100",attrs:{src:"img/ViewReset.svg"}})],1),i("span",{staticStyle:{width:"25px",height:"30px","line-height":"25px",cursor:"pointer"},on:{click:t.zoomOut}},[i("b-img",{staticClass:"w-100 h-100",attrs:{src:"img/Dash.svg"}})],1),i("b-form-input",{staticClass:"mx-2",attrs:{type:"range",min:"1",max:"100"},on:{update:t.changeScale},model:{value:t.inputScale,callback:function(e){t.inputScale=e},expression:"inputScale"}}),i("span",{staticStyle:{width:"25px",height:"30px","line-height":"25px",cursor:"pointer"},on:{click:t.zoomIn}},[i("b-img",{staticClass:"w-100 h-100",attrs:{src:"img/Plus.svg"}})],1)],1)},Ui=[],qi=1,Ki=200,Ji={name:"Viewport",data:function(){return{inputScale:0,inputScaleClone:0}},computed:{scale:function(){return 100-this.inputScale}},mounted:function(){var t=this,e=this.$editor.solution.drawing;this.inputScale=100-e.scale,this._interval=setInterval((function(){t.inputScaleClone=100-e.scale,t.inputScaleClone!==t.inputScale&&(t.inputScale=t.inputScaleClone)}),Ki)},destroyed:function(){clearInterval(this._interval)},methods:{negativeBackToCenter:function(){this.$editor.feature.drawing.negativeBackToCenter()},changeScale:function(){this.$editor.solution.drawing.setScale(this.scale)},zoomOut:function(){1!=this.inputScale&&(this.inputScale=Number(this.inputScale)-qi,this.$editor.solution.drawing.setScale(this.scale))},zoomIn:function(){100!=this.inputScale&&(this.inputScale=Number(this.inputScale)+qi,this.$editor.solution.drawing.setScale(this.scale))}}},Qi=Ji,Xi=(i("95f6"),Object($["a"])(Qi,Hi,Ui,!1,null,null,null)),Yi=Xi.exports,Zi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"visible"}},[i("b-dropdown",{attrs:{"no-caret":"",dropup:"",size:"sm",variant:"link"},scopedSlots:t._u([{key:"button-content",fn:function(){return[i("b-img",{attrs:{src:"img/Eye.svg"}})]},proxy:!0}])},[i("b-dropdown-group",{attrs:{header:"勾选隐藏项","header-classes":"visible-dropdown-header"}},[i("b-dropdown-form",{staticClass:"visible-dropdown-form"},[i("b-form-checkbox",{on:{change:t.changeRoomNameVisible},model:{value:t.visible.roomName,callback:function(e){t.$set(t.visible,"roomName",e)},expression:"visible.roomName"}},[t._v("房间名")]),i("b-form-checkbox",{on:{change:t.changeRoomAreaVisible},model:{value:t.visible.roomArea,callback:function(e){t.$set(t.visible,"roomArea",e)},expression:"visible.roomArea"}},[t._v("面积")]),i("b-form-checkbox",{on:{change:t.changeSizeVisible},model:{value:t.visible.size,callback:function(e){t.$set(t.visible,"size",e)},expression:"visible.size"}},[t._v("尺寸标注")])],1)],1)],1)],1)},tn=[],en={name:"Visible",data:function(){return{visible:{roomName:!1,roomArea:!1,size:!1}}},mounted:function(){this.$editor.setRoomAreaShow(!0)},methods:{changeRoomNameVisible:function(t){this.$editor.setRoomNameShow(!t)},changeRoomAreaVisible:function(t){this.$editor.setRoomAreaShow(!t)},changeSizeVisible:function(t){this.$editor.setDimensionShow(!t)}}},nn=en,on=(i("40e4"),Object($["a"])(nn,Zi,tn,!1,null,null,null)),rn=on.exports,an={name:"",components:{AppMenu:F,AppToolBar:ut,AppToolSetting:Rt,AppProperty:mi,AppPropertyCard:Gi,appViewport:Yi,appVisible:rn},mounted:function(){var t=this.$editor.solution.drawing;t.mount(this.$refs.drawing),this.$editor.feature.drawing.originBackToCenter(),t.options.style.backgroundColor=16711422,t.structure.options.corner.style.hover.color=4235007,t.structure.options.wall.style.color=8355711,t.structure.options.wall.midline.show=!1,t.grid.options.rectangular.style.lineWidth=.5,t.compass.element.setNorthPointColor(4235007),t.compass.element.setSouthPointColor(14540253),this.$root.$on("drawing-resize",(function(){t.resize()}))},methods:{useTransformerFromSelector:function(){var t=this.$editor.solution.tool;t.activated===t.symbol.SELECTOR&&t.openTransformer()}}},sn=an,ln=Object($["a"])(sn,k,T,!1,null,null,null),cn=ln.exports,un=i("c20e"),pn=i("a007"),dn=i("e3fc"),fn=(i("dca8"),i("3ca3"),i("10d1"),i("ddb0"),i("7d94")),hn=function(t){Object(pn["a"])(i,t);var e=Object(dn["a"])(i);function i(){return Object(ti["a"])(this,i),e.apply(this,arguments)}return Object(Ze["a"])(i)}(fn["a"].Emitter);function mn(){return{name:"untitled",floor:{base:0,list:[]}}}var gn=function(t){return t},vn=function(t){var e=t.editor,i=t.accessor,n={name:""};function o(){var t=mn();return t.floor=e.feature.floor.getData(),t}function r(t){n.name=t.name,e.feature.floor.setData(t.floor)}return{open:function(){return Object(b["a"])(Object(v["a"])().mark((function t(){var e;return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.open();case 2:e=t.sent,gn(e),r(e);case 5:case"end":return t.stop()}}),t)})))()},save:function(){return Object(b["a"])(Object(v["a"])().mark((function t(){return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.save(o());case 2:case"end":return t.stop()}}),t)})))()}}},bn=(i("8ba4"),i("4e82"),i("fb6a"),function(t){if(!Number.isInteger(t))throw new TypeError("Invalid base, an integer expected.")}),yn=function(t){bn(t.base)},wn=function(t){var e=t.editor,i=t.accessor,n=null,o={base:null,list:[]},r=function(t){if(!o.list.some((function(e){return e.level===t})))throw new Error("Can NOT found a floor level=".concat(t))},a=function(){o.base=null,o.list=[]},s=function(t){return o.list.find((function(e){return e.level===t}))},l={get length(){return o.list.length},get base(){return o.base},get current(){return n},set current(t){n=t},get currentFloor(){return s(n)},select:function(t){if(bn(t),r(t),null!==n){var i=s(n);Object.assign(i,e.serialize())}this.clear(!0),e.deserialize(s(t)),n=t},getData:function(){return o},setData:function(t){yn(t),a(),t.list.slice(0).sort((function(t,e){return t.level-e.level})).forEach((function(t){return o.list.push(t)})),o.base=t.base,l.select(t.base),e.emit("floor-set")},setFloorName:function(t){s(n).name=t},clear:function(t){var i=e.solution.drawing,n=i.structure.getAllCornerList(),o=i.windoor.getAllHollowList(),r=i.entrance.getAllArrowList(),a=i.negative.getAllBitmapList();e.feature.tool.openDefault();try{o.forEach((function(t){return t.remove()})),n.forEach((function(t){return t.remove()})),r.forEach((function(t){return t.remove()})),t&&a.forEach((function(t){return t.remove()}))}catch(s){console.log(s),this.save()}},updateFloorData:function(){null!==n&&Object.assign(s(n),e.serialize())},save:function(){return Object(b["a"])(Object(v["a"])().mark((function t(){return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(o),t.abrupt("return",i.save(o));case 2:case"end":return t.stop()}}),t)})))()}};return l},xn=function(t){var e=t.editor,i=e.solution.tool,n={get activated(){return i.activated},get symbol(){return i.symbol},openDefault:function(){i.openDefault(),e.solution.drawing.common.selector.drop()},openSelector:function(){i.openSelector()},openTransformer:function(){i.openTransformer()},openBuilder:function(){i.openWallBuilder()},openChamber:function(){i.openChamber()}};return n},kn={common:null,bearing:3355443,short:16777215},Tn=function(){function t(e,i){Object(ti["a"])(this,t),this.wall=e,this.editor=i,this.className="EditorWall",this.type=""}return Object(Ze["a"])(t,[{key:"thisSurface",get:function(){return this.wall.thisSurface}},{key:"thatSurface",get:function(){return this.wall.thatSurface}},{key:"thickness",get:function(){return this.wall.thickness},set:function(t){this.wall.thickness=t}},{key:"setType",value:function(t){this.type=t,t&&(this.wall.color=kn[t]||null)}}]),t}(),Sn=function(t){return(t/1e6).toFixed(2)},Cn=function(t,e,i,n,o,r){return((i-t)*(r-e)-(o-t)*(n-e))/2},_n=function(t){if(!(t.length<3)){for(var e=t[0],i=0,n=0,o=0,r=t[1],a=2;a<t.length;a++){var s=t[a],l=Cn.apply(void 0,Object(le["a"])(e).concat(Object(le["a"])(r),Object(le["a"])(s)));o+=l,i+=(e[0]+r[0]+s[0])*l,n+=(e[1]+r[1]+s[1])*l,r=s}return[i/o/3,n/o/3]}},Ln=function(){function t(e,i){Object(ti["a"])(this,t),this.room=e,this.editor=i,this.className="EditorRoom",this.type="",this.name="",this.labelPosition=null}return Object(Ze["a"])(t,[{key:"area",get:function(){return this.room.area}},{key:"label",get:function(){var t=this;return this.editor.solution.drawing.label.getAllLabelTextList().find((function(e){return e.room===t.room}))||null}},{key:"setType",value:function(t){this.type=t}},{key:"setName",value:function(t){if(this.name=t,this.label){var e="";this.editor.state.roomNameShow&&(e+=t),this.editor.state.roomAreaShow&&(e+="".concat(e.length>0?"\n":"","约").concat(Sn(this.area),"m²")),this.label.setText(e)}}},{key:"getLabelPosition",value:function(){return Object(le["a"])(this.labelPosition)}},{key:"setLabelPosition",value:function(t,e){this.labelPosition=[t,e],this.label&&this.label.setPosition(t,e)}},{key:"updateLabelPosition",value:function(){var t=this.room.getOuterSurfaceList().map((function(t){return[t.corner.x,t.corner.y]}));this.setLabelPosition.apply(this,Object(le["a"])(_n(t)))}},{key:"updateLabelText",value:function(){this.setName(this.name)}}]),t}(),On=function(t,e){var i=t.x-e.x,n=t.y-e.y;return Math.pow(i*i+n*n,.5)},$n=function(){function t(e,i){Object(ti["a"])(this,t),this.hollow=e,this.editor=i,this.className="EditorHollow"}return Object(Ze["a"])(t,[{key:"width",get:function(){return this.hollow.width},set:function(t){this.hollow.setWidth(t)}},{key:"materialName",get:function(){return this.hollow.materialName}},{key:"surface",get:function(){return this.hollow.surface}},{key:"offset",get:function(){return this.hollow.offset},set:function(t){this.hollow.setOffset(t)}},{key:"arrow",get:function(){var t=this,e=this.editor.solution.drawing.entrance.getAllArrowList().find((function(e){return e.hollow===t.hollow}));return e||null}},{key:"setMaterial",value:function(t){this.hollow.setMaterial(t)}},{key:"setDefaultWidth",value:function(){this.hollow.setWidth(this.hollow.defaultWidth)}},{key:"flip",value:function(){this.hollow.flip()}},{key:"setEntrance",value:function(){var t=this.editor.solution.drawing,e=t.entrance.getAllArrowList();if(this.arrow)this.arrow.remove();else{var i=this.surface.room,n=this.surface.back.room;e.forEach((function(t){var e=t.hollow.surface.room,o=t.hollow.surface.back.room;(!i||i!==e&&i!==o)&&(!n||n!==e&&n!==o)||t.remove()})),t.entrance.createArrow(this.hollow)}}},{key:"changeSurface",value:function(){var t=On(this.surface.corner,this.surface.back.corner)-this.offset;this.hollow.setSurface(this.surface.back),this.hollow.setOffset(t)}}]),t}(),jn=function(t){var e,i,n,o,r=t.editor,a=t.Element,s=t.Tool,l=r.solution.drawing,c=l.bricklayer.Builder,u=l.bricklayer.Chamber,p=!1,d=(e={},Object(P["a"])(e,s.Bricklayer.Builder.PICKUP_FROM,(function(t){0===t&&c.pick()})),Object(P["a"])(e,s.Bricklayer.Builder.PICKUP_TO,(function(t){0===t&&c.build().pick().pick()})),e),f=(i={},Object(P["a"])(i,s.Bricklayer.Builder.PICKUP_FROM,(function(t){2!==t||p||r.feature.tool.openDefault()})),Object(P["a"])(i,s.Bricklayer.Builder.PICKUP_TO,(function(t){2!==t||p||c.drop()})),i),h=(n={},Object(P["a"])(n,s.Bricklayer.Chamber.PICKUP_FROM,(function(t){0===t&&u.pick()})),Object(P["a"])(n,s.Bricklayer.Chamber.PICKUP_TO,(function(t){0===t&&u.build().pick()})),n),m=(o={},Object(P["a"])(o,s.Bricklayer.Chamber.PICKUP_FROM,(function(t){2!==t||p||r.feature.tool.openDefault()})),Object(P["a"])(o,s.Bricklayer.Chamber.PICKUP_TO,(function(t){2!==t||p||u.drop()})),o),g=function(t){0===t&&l.common.selectorAction(l.focusing)},v=function(t){if(2!==t||p||r.feature.tool.openDefault(),0===t){var e=l.focusing;l.common.transformerAction(e),e instanceof a.Hollow?l.hammer.adjuster.pick():l.hammer.adjuster.drop(),e instanceof a.LabelText?l.label.LabelTransformer.pick():l.label.LabelTransformer.drop()}};l.on("pointerdown",(function(t){if(2===t.button){var e=function(){return p=!0},i=function t(){l.off("pointermove",e),window.removeEventListener("mouseup",t)};p=!1,l.on("pointermove",e),window.addEventListener("mouseup",i)}c.$state!==s.Ready&&d[c.$state](t.button),u.$state!==s.Ready&&h[u.$state](t.button)})),l.on("pointerup",(function(t){r.feature.tool.activated===r.feature.tool.symbol.SELECTOR&&g(t.button),r.feature.tool.activated===r.feature.tool.symbol.TRANSFORMER&&v(t.button),u.$state!==s.Ready&&m[u.$state](t.button),c.$state!==s.Ready&&f[c.$state](t.button)}));var b=function(){var t=l.structure.getAllRoomList();return t.length?t.map((function(t){return t.area})).reduce((function(t,e){return t+e})):0},y=function(t){r.map.set(t,new Tn(t,r)),t.on("destory",(function(){return r.map.delete(t)}))},w=function(t){var e=new Ln(t,r);r.map.set(t,e),setTimeout((function(){var i="未命名",n=l.label.createLabelText();n.setRoom(t),e.setName(i),e.updateLabelPosition(),r.emit("area-change",b()),t.on("destroy",(function(){n.remove(),r.map.delete(t)})),c.$state===s.Bricklayer.Builder.PICKUP_TO&&1!==c.from.size&&c.drop()}))},x=function(t){r.map.has(t)||r.map.set(t,new $n(t,r)),t.on("destory",(function(){return r.map.delete(t)}))},k=function(t){t.on("change",(function(){t.room&&r.map.get(t.room).setLabelPosition(t.x,t.y)}))},T=function(t){t.on("pointerdown",(function(){t.flip()}))};l.on("element-create",(function(t){t instanceof a.Wall&&y(t),t instanceof a.Room&&w(t),t instanceof a.Hollow&&x(t),t instanceof a.LabelText&&k(t),t instanceof a.Arrow&&T(t)})),l.structure.on("change",(function(){var t,e=Object(ei["a"])(l.structure.rooms());try{for(e.s();!(t=e.n()).done;){var i=t.value;r.map.get(i).updateLabelPosition(),r.map.get(i).updateLabelText()}}catch(n){e.e(n)}finally{e.f()}r.emit("area-change",b())})),window.addEventListener("keydown",(function(t){if("Escape"===t.key){if(r.feature.tool.activated===r.feature.tool.symbol.WALL_BUILDER&&c.$state===s.Bricklayer.Builder.PICKUP_TO)return void c.drop();r.feature.tool.openDefault()}"Delete"===t.key&&l.common.remove()}));var S={originBackToCenter:function(){var t=l.width,e=l.height;l.setOrigin(t/2,e/2),l.setScale(25)},negativeBackToCenter:function(){var t=l.width,e=l.height,i=l.negative.getAllBitmapList();if(i[0]){var n=i[0],o=n.width,r=n.height;l.viewport.ViewAdjuster.backToCenter(-o/2,r/2,o/2,-r/2)}else l.setOrigin(t/2,e/2),l.setScale(25)}};return S},Fn=(i("cb29"),Math.PI),Dn=60,Rn=15,Wn=10,Nn={stateless:{line:0,arcLine:14145753,fill:16777215,windowFill:13421772},hover:{line:8053503,arcLine:15464441,fill:16777215,windowFill:13421772},select:{line:4096759,arcLine:15068665,fill:16777215,windowFill:13421772},virtual:{line:16711680,arcLine:16711680,fill:16777215,windowFill:16777215}},Pn=function(t){var e=t.hover,i=t.focus,n=t.select,o=t.virtual;return n||i?Nn.select:e?Nn.hover:o?Nn.virtual:Nn.stateless},En={width:800,render:function(t,e){var i=e.width,n=e.height,o=e.fliped,r=e.scale,a=o?1:0,s=Rn/r,l=Dn/r,c=Pn(e);return t.lineStyle(s,c.arcLine).beginFill(c.fill,.1).arc(i*a,n/2,i,-Fn/2*a-Fn/2,-Fn*a/2).lineTo(i*a,n/2).lineTo(0,n/2-i+a*i).endFill().beginFill(c.fill).lineStyle(s,c.fill).drawRect(0,0,i,n).lineStyle(s,c.line).moveTo(0,0).lineTo(0,n).moveTo(i,0).lineTo(i,n).lineStyle(s,c.line).drawRect((i-l)*a,n/2,l,-i),t.pivot.x=i/2,t.pivot.y=n/2,t}},An={width:800,render:function(t,e){var i=e.width,n=e.height,o=e.scale,r=Rn/o,a=Dn/o,s=Pn(e);return t.lineStyle(r,s.arcLine).beginFill(s.fill,.1).arc(0,n/2,i/2,-Fn/2,0).lineTo(0,n/2).lineTo(0,(n-i)/2).endFill().beginFill(s.fill,.1).lineStyle(r,s.arcLine).arc(i,n/2,i/2,Fn,-Fn/2).lineTo(i,n/2).lineTo(i/2,n/2).endFill().beginFill(s.fill).lineStyle(r,s.fill).drawRect(0,0,i,n).lineStyle(r,s.line).moveTo(0,0).lineTo(0,n).moveTo(i,0).lineTo(i,n).drawRect(0,n/2,a,-i/2).drawRect(i,n/2,-a,-i/2),t.pivot.x=i/2,t.pivot.y=n/2,t}},Bn={width:800,render:function(t,e){var i=e.width,n=e.height,o=e.scale,r=e.fliped,a=r?-1:1,s=Rn/o,l=Wn/o,c=Pn(e);return t.lineStyle(s,c.line).beginFill(c.fill).drawRect(0,0,i,n).drawRect(0+s+l,n/2,2*i/3,n/4*a).drawRect(i-s-l,n/2,-2*i/3,-n/4*a),t.pivot.x=i/2,t.pivot.y=n/2,t}},Mn={width:1450,render:function(t,e){var i=e.width,n=e.height,o=e.fliped,r=e.scale,a=o?1:0,s=Rn/r,l=Pn(e);return t.lineStyle(s,l.line).beginFill(l.fill).drawRect(0,0,i,n).moveTo(0,n/3).lineTo(i,n/3).moveTo(0,2*n/3).lineTo(i,2*n/3).moveTo(i/4+a*i/2,n/3).lineTo(i/4+a*i/2,2*n/3).endFill(),t.pivot.x=i/2,t.pivot.y=n/2,t}},zn={width:2e3,render:function(t,e){var i=e.width,n=e.height,o=e.scale,r=Rn/o,a=Pn(e);return t.lineStyle(r,a.fill).beginFill(a.fill).drawRect(0,0,i,n).endFill().lineStyle(r,a.line).drawRect(0,0,i,n/3).drawRect(0,2*n/3,i,n/3),t.pivot.x=i/2,t.pivot.y=n/2,t}},Vn={width:800,render:function(t,e){var i=e.width,n=e.height,o=e.scale,r=Rn/o,a=Pn(e);return t.lineStyle(r,a.line).beginFill(a.fill).drawRect(0,0,i,n).moveTo(0,n/2).lineTo(i,n/2).endFill(),t.pivot.x=i/2,t.pivot.y=n/2,t}},In={width:1500,render:function(t,e){var i=e.width,n=e.scale,o=e.sillThickness,r=void 0===o?500/n:o,a=e.height,s=Rn/n,l=a,c=Pn(e);return t.lineStyle(s,c.line).beginFill(c.windowFill).drawRect(0,-r,i,r).endFill().beginFill(c.fill).moveTo(0,-a).lineTo(0,-r).lineTo(i,-r).lineTo(i,-a).lineTo(i+l,-a).lineTo(i+l,-(r+l)).lineTo(-l,-(r+l)).lineTo(-l,-a).lineTo(0,-a).endFill().moveTo(-l/2,-a).lineTo(-l/2,-(r+l/2)).lineTo(i+l/2,-(r+l/2)).lineTo(i+l/2,-a),t.pivot.x=i/2,t.pivot.y=-a/2,t}},Gn={width:1500,render:function(t,e){var i=e.width,n=e.height,o=e.scale,r=Rn/o,a=Pn(e);return t.lineStyle(r,a.line).beginFill(a.fill).drawRect(0,0,i,n).endFill().moveTo(0,n/2).lineTo(i,n/2).moveTo(0,n/3).lineTo(i,n/3).moveTo(0,2*n/3).lineTo(i,2*n/3).moveTo(i/2,n/3).lineTo(i/2,2*n/3),t.pivot.x=i/2,t.pivot.y=n/2,t}},Hn={render:function(t,e){var i=e.leftWidth,n=e.rightWidth,o=e.leftWallThickness,r=e.rightWallThickness,a=e.scale,s=Rn/a,l=Pn(e);return t.lineStyle(s,l.line).beginFill(l.fill).moveTo(0,0).lineTo(n,0).lineTo(n,r).lineTo(o,r).lineTo(o,i).lineTo(0,i).lineTo(0,0).endFill().moveTo(o/2,i).lineTo(o/2,r/2).lineTo(n,r/2),t.pivot.x=n/2,t.pivot.y=r/2,t}},Un={render:function(t,e){var i=e.leftWidth,n=e.centerWidtn,o=e.rightWidth,r=e.leftWallThickness,a=e.centerWallThickness,s=e.rightWallThickness,l=e.scale,c=Rn/l,u=Pn(e);return t.lineStyle(c,u.line).beginFill(u.fill).moveTo(0,0).lineTo(n,0).lineTo(n,o).lineTo(n-s,o).lineTo(n-s,a).lineTo(r,a).lineTo(r,i).lineTo(0,i).lineTo(0,0).endFill().moveTo(r/2,i).lineTo(r/2,a/2).lineTo(n-s/2,a/2).lineTo(n-s/2,o),t.pivot.x=n/2,t.pivot.y=a/2,t}},qn={render:function(t,e){var i=e.leftWidth,n=e.rightWidth,o=e.leftWindowThickness,r=e.rightWindowThickness,a=e.leftWallThickness,s=e.rightWallThickness,l=e.scale,c=Rn/l,u=Pn(e);return t.lineStyle(c,u.line).beginFill(u.windowFill).moveTo(a,s).lineTo(n,s).lineTo(n,s-r).lineTo(a-o,s-r).lineTo(a-o,i).lineTo(a,i).lineTo(a,s).endFill().beginFill(u.fill).moveTo(a-o,s-r).lineTo(n,s-r).lineTo(n,0).lineTo(n+s,0).lineTo(n+s,-r).lineTo(-o,-r).lineTo(-o,i+a).lineTo(0,i+a).lineTo(0,i).lineTo(a-o,i).lineTo(a-o,s-r).endFill().moveTo(0,i+a/2).lineTo(a/2-o,i+a/2).lineTo(a/2-o,s/2-r).lineTo(n+s/2,s/2-r).lineTo(n+s/2,0),t.pivot.x=n/2,t.pivot.y=s/2,t}},Kn={render:function(t,e){var i=e.leftWidth,n=e.centerWidtn,o=e.rightWidth,r=e.leftWindowThinkness,a=e.centerWindowThinkness,s=e.rightWindowThinkness,l=e.leftWallThickness,c=e.centerWallThickness,u=e.rightWallThickness,p=e.scale,d=Rn/p,f=Pn(e);return t.lineStyle(d,f.line).beginFill(f.windowFill).moveTo(l,c).lineTo(n-u,c).lineTo(n-u,o).lineTo(n-u+s,o).lineTo(n-u+s,c-a).lineTo(l-r,c-a).lineTo(l-r,i).lineTo(l,i).lineTo(l,c).endFill().beginFill(f.fill).moveTo(l-r,c-a).lineTo(n+s-u,c-a).lineTo(n+s-u,o).lineTo(n,o).lineTo(n,o+u).lineTo(n+s,o+u).lineTo(n+s,-a).lineTo(-r,-a).lineTo(-r,i+l).lineTo(0,i+l).lineTo(0,i).lineTo(l-r,i).lineTo(l-r,c-a).endFill().moveTo(0,i+l/2).lineTo(l/2-r,i+l/2).lineTo(l/2-r,c/2-a).lineTo(n+s-u/2,c/2-a).lineTo(n+s-u/2,o+u/2).lineTo(n,o+u/2),t.pivot.x=n/2,t.pivot.y=c/2,t}},Jn=[{id:"singleDoor",material:p.SingleDoor},{id:"doubleDoor",material:p.DoubleDoor},{id:"slidingDoor",material:p.SlidingDoor},{id:"bealock",material:p.Bealock},{id:"basicWindow",material:d.BasicWindow},{id:"boilerWindow",material:d.BoilerWindow}],Qn=function(){var t=Object(b["a"])(Object(v["a"])().mark((function t(e){var i,n;return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.Resource,n=[i.WindoorListRegister(Jn)],t.abrupt("return",Promise.all(n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Xn=null,Yn=function(t){var e=t.editor;Xn=setInterval((function(){e.feature.floor.updateFloorData()}),5e3),window.addEventListener("error",(function(){clearInterval(Xn),e.feature.floor.save()}))},Zn=function(t){var e={begin:function(t,e){var i=e.negative.getAllBitmapList();i[0]&&(t.bitmap={position:[i[0].x,i[0].y],rotation:i[0].rotation})},walls:function(t){t.wallList=[]},wall:function(e,i){e.wallList.push({type:t.map.get(i).type})},rooms:function(t){t.roomList=[]},room:function(e,i){var n=t.map.get(i);e.roomList.push({type:n.type,name:n.name,labelPosition:Object(le["a"])(n.labelPosition)})},hollows:function(t){t.hollowList=[]},hollow:function(t,e,i){var n=i.entrance.getAllArrowList().find((function(t){return t.hollow===e}));n?t.hollowList.push({entrance:{fliped:n.fliped}}):t.hollowList.push({})}},i={end:function(t,e){if(t.bitmap){var i=t.bitmap,n=i.position,o=i.rotation,r=e.negative.createBitmap("negative".concat(t.level));r.setPosition.apply(r,Object(le["a"])(n)),r.setRotation(o)}},wall:function(e,i,n){var o=e.wallList[n],r=t.map.get(i);o.type&&r.setType(o.type)},room:function(e,i,n){var o=e.roomList[n],r=o.name,a=o.type,s=o.labelPosition,l=t.map.get(i);r&&l.setName(r),a&&l.setType(a),s&&l.setLabelPosition.apply(l,Object(le["a"])(s))},hollow:function(t,e,i,n){var o=t.hollowList[i],r=o.entrance;if(r){var a=n.entrance.createArrow(e);a.fliped!==r.fliped&&a.flip()}}};return{serializer:e,deserializer:i}},to=function(t){var e=t.Solution,i=t.accessor,n={Corner:e.Element.Corner,Wall:e.Element.Wall,Room:e.Element.Room,Hollow:e.Element.Hollow,LabelText:e.Element.LabelText,Bitmap:e.Element.Bitmap,Arrow:e.Element.Arrow},o={Ready:e.Tool.Ready,Common:e.Tool.Common,Hammer:e.Tool.Hammer,Bricklayer:e.Tool.Bricklayer},r={WindoorRegister:e.Resource.windoorRegister,WindoorListRegister:e.Resource.windoorListRegister,NegativeRegister:e.Resource.negativeRegister,NegativeListRegister:e.Resource.negativeListRegister},a=function(t){return Object.freeze({editor:t,Element:n,Tool:o,Resource:r,accessor:i})},p=function(t){Object(pn["a"])(r,t);var o=Object(dn["a"])(r);function r(){var t;Object(ti["a"])(this,r),t=o.call(this),t.map=new WeakMap,t.state={roomNameShow:!0,roomAreaShow:!0,dimensionShow:!0,snap:!0};var p=a(Object(un["a"])(t)),d=new e(Zn(Object(un["a"])(t))),m=d.drawing;return t.solution=d,t.feature={document:s.install(p),floor:l.install(p),tool:c.install(p),drawing:u.install(p)},f.install(p),h.install(p),i.open().then((function(e){return t.feature.floor.setData(e)})),m.common.on("selector-add",(function(e){var i=e.map((function(e){return t.map.get(e)||null}));t.emit("select",i)})),m.common.on("selector-clear",(function(){t.emit("unselect")})),m.on("element-create",(function(e){e instanceof n.Wall?t.emit("wall-create",e):e instanceof n.Room?t.emit("room-create",e):e instanceof n.Hollow?t.emit("hollow-create",e):e instanceof n.Bitmap&&t.emit("bitmap-create",e)})),m.on("element-destroy",(function(e){e instanceof n.Wall?t.emit("wall-destroy",e):e instanceof n.Room?t.emit("room-destroy",e):e instanceof n.Hollow&&t.emit("hollow-destroy",e)})),d.tool.on("open",(function(e){t.emit("tool-open",e)})),m.compass.element.on("change",(function(e){t.emit("compass-change",e)})),Object.freeze(Object(un["a"])(t)),t}return Object(Ze["a"])(r,[{key:"Element",get:function(){return n}},{key:"getSelected",value:function(){var t=this;return this.solution.drawing.common.getSelectedList().map((function(e){return t.map.get(e)||null}))}},{key:"getState",value:function(){return this.state}},{key:"serialize",value:function(){var t=this.feature.floor,e=t.currentFloor,i=this.solution.serializer.execute(e);return e.drawing=i,t.getData().list.forEach((function(t){t.drawing.compass?t.drawing.compass.rotation=i.compass.rotation:t.drawing.compass={rotation:i.compass.rotation}})),e}},{key:"deserialize",value:function(t){this.solution.deserializer.execute(t.drawing,t)}},{key:"updateAllRoomLabel",value:function(){var t,e=Object(ei["a"])(this.solution.drawing.structure.rooms());try{for(e.s();!(t=e.n()).done;){var i=t.value;this.map.get(i).updateLabel()}}catch(n){e.e(n)}finally{e.f()}}},{key:"setRoomNameShow",value:function(t){this.state.roomNameShow=t,this.updateAllRoomLabel()}},{key:"setRoomAreaShow",value:function(t){this.state.roomAreaShow=t,this.updateAllRoomLabel()}},{key:"setDimensionShow",value:function(t){this.state.dimensionShow=t;var e,i=Object(ei["a"])(this.solution.drawing.measure.dimensions());try{for(i.s();!(e=i.n()).done;){var n=e.value;t?n.show():n.hide()}}catch(o){i.e(o)}finally{i.f()}}},{key:"setSnap",value:function(t){var e=this.solution.drawing;e.grid.options.rectangular.snap.enabled=t,e.structure.options.snap.corner.active=t,this.state.snap=t}},{key:"split",value:function(t){var e=this.solution.drawing,i=t.wall,n=i.thisCorner,o=i.thatCorner,r=e.structure.createCorner((n.x+o.x)/2,(n.y+o.y)/2);e.common.remove(),e.structure.createWall(n,r),e.structure.createWall(r,o)}},{key:"delete",value:function(){this.solution.drawing.common.remove()}}]),r}(hn);return p},eo=function(t){return t},io=function(t){return t},no=function(t){return{name:"untitled",base:1,list:t.list.map((function(t){return{name:"",level:t.level,bitmap:{position:[0,0],rotation:0},drawing:{compass:{rotation:0},cornerList:[],wallList:[],roomList:[],hollowList:[],stuffList:[],labelTextList:[],labelLineList:[]}}}))}},oo={install:function(t,e){var i=to(e);t.prototype.$editor=new i}},ro=(i("e9c4"),location.origin),ao=function(){function t(){Object(ti["a"])(this,t)}return Object(Ze["a"])(t,[{key:"getTicket",value:function(){return fetch(ro+"").then((function(){return""}))}},{key:"getFloor",value:function(){return fetch(ro+"").then((function(){return{base:2,list:[0,1,2].map((function(t){return{level:t}}))}}))}},{key:"getNegative",value:function(){return fetch(ro+"").then((function(){return[{id:"negative1",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.to8to.com%2Fcase%2F2006%2F23%2F20200623_6a750511c8d76b01310a6wvonv822qh0.jpg&refer=http%3A%2F%2Fpic.to8to.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1645100826&t=0437dfdfef1405d8c159efd7c130d5ec",scale:.05},{id:"negative2",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimages.081616.cn%2Farticle%2Fmaifang%2Fkanhuxing%2F232.jpg&refer=http%3A%2F%2Fimages.081616.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659786598&t=a3bdc6951b31bdb0f5151e2b2903bcbb",scale:.05},{id:"negative3",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimgs.soufun.com%2Fnews%2F2014_07%2F24%2Fnews%2F1406194190774_000.jpg&refer=http%3A%2F%2Fimgs.soufun.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1660013137&t=5443dd7d6e3a51f168c74bb27e1b3554",scale:.05}]}))}},{key:"getDrawing",value:function(){return fetch(ro+"").then((function(){return null}))}},{key:"saveDrawing",value:function(t){return fetch(ro+"",{method:"POST",body:JSON.stringify(t)})}}]),t}(),so=new ao,lo={install:function(t,e){ro=e.baseURL,t.prototype.$e100=so}},co=(i("2b3d"),i("9861"),i("c6c5")),uo=function(){var t=Object(b["a"])(Object(v["a"])().mark((function t(){var e,i,n,o,r,a=arguments;return Object(v["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:function(){},t.next=3,so.getTicket();case 3:i=t.sent,n=new URL(location.href),o=n.searchParams.get("host")||"127.0.0.1",r=n.searchParams.get("port")||"3001",co["a"]({origin:"http://".concat(o,":").concat(r),ticket:i},(function(t){e(t)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),po=i("8f9c");uo((function(t){y["default"].use(w["a"],po),y["default"].use(x["a"]),y["default"].use(lo,{baseURL:location.origin}),y["default"].use(oo,{Solution:t,accessor:{save:function(t){return Object(b["a"])(Object(v["a"])().mark((function e(){return Object(v["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",so.saveDrawing(t));case 1:case"end":return e.stop()}}),e)})))()},open:function(){return Object(b["a"])(Object(v["a"])().mark((function e(){var i,n,o,r;return Object(v["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=["https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.to8to.com%2Fcase%2F2006%2F23%2F20200623_6a750511c8d76b01310a6wvonv822qh0.jpg&refer=http%3A%2F%2Fpic.to8to.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1645100826&t=0437dfdfef1405d8c159efd7c130d5ec","https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimages.081616.cn%2Farticle%2Fmaifang%2Fkanhuxing%2F232.jpg&refer=http%3A%2F%2Fimages.081616.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659786598&t=a3bdc6951b31bdb0f5151e2b2903bcbb","https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimgs.soufun.com%2Fnews%2F2014_07%2F24%2Fnews%2F1406194190774_000.jpg&refer=http%3A%2F%2Fimgs.soufun.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1660013137&t=5443dd7d6e3a51f168c74bb27e1b3554"],n={base:1,list:[1,2,3].map((function(t){return{level:t,bitmap:i[t-1],scale:.05}}))},m.isHouse(n)){e.next=4;break}throw new TypeError("Invalid house, a house object expected.");case 4:return e.next=6,t.Resource.negativeListRegister(n.list.map((function(t){return{id:"negative".concat(t.level),url:t.bitmap,scale:t.scale}})));case 6:return e.next=8,so.getDrawing();case 8:if(o=e.sent,null===o&&(r=m.fromHouse(n),o=r),m.isDrawing(o)){e.next=12;break}throw new TypeError("Invalid drawing, a drawing object expected.");case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))()}}});var e=new y["default"]({render:function(t){return t(cn)}});window.addEventListener("keydown",(function(t){t.altKey&&t.preventDefault()})),window.addEventListener("resize",(function(){e.$emit("drawing-resize")})),e.$mount("#app")}))},"687c":function(t,e,i){"use strict";i("2b1a")},"698f":function(t,e,i){"use strict";i("389a")},"6db6":function(t,e,i){"use strict";i("aeae")},"783f":function(t,e,i){"use strict";i("ddc3")},"7b33":function(t,e,i){"use strict";i("b2ed")},8899:function(t,e,i){},"88d6":function(t,e,i){},"8f9c":function(t){t.exports=JSON.parse('{"breakpoints":["xs","sm","md","lg","xl","xxl"],"formControls":{"size":"sm"},"BLink":{"activeClass":"active"},"BButton":{"variant":"primary","size":"sm"},"BToast":{"toaster":"b-toaster-top-center","autoHideDelay":3000,"variant":"primary","toastClass":null,"headerClass":null,"bodyClass":null},"BModal":{"cancelVariant":"secondary","okVariant":"primary"},"BFormGroup":{"labelSize":"sm"},"BInputGroup":{"size":"sm"},"BNavItem":{"linkClasses":["p-0","px-1"]}}')},9018:function(t,e,i){},9342:function(t,e,i){"use strict";i("f083")},"95f6":function(t,e,i){"use strict";i("cdee")},aeae:function(t,e,i){},b2ed:function(t,e,i){},bb78:function(t,e,i){"use strict";i("5051")},cdee:function(t,e,i){},ddc3:function(t,e,i){},f083:function(t,e,i){},f709:function(t,e,i){"use strict";i("fabd")},fabd:function(t,e,i){}});