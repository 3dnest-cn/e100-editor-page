(function(t){function e(e){for(var i,a,l=e[0],s=e[1],c=e[2],p=0,d=[];p<l.length;p++)a=l[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,l=1;l<n.length;l++){var s=n[l];0!==o[s]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0085":function(t,e,n){"use strict";n("12fd")},1227:function(t,e,n){},"12fd":function(t,e,n){},"14ac":function(t,e,n){"use strict";n("9018")},"2b1a":function(t,e,n){},"389a":function(t,e,n){},"3a74":function(t,e,n){},"40e4":function(t,e,n){"use strict";n("8899")},"4c00":function(t,e,n){"use strict";n("88d6")},5051:function(t,e,n){},"507d":function(t,e,n){"use strict";n("3a74")},"56d7":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"Line",(function(){return be})),n.d(i,"Vector",(function(){return ve})),n.d(i,"Segment",(function(){return we})),n.d(i,"Point",(function(){return xe}));var o={};n.r(o),n.d(o,"fromBothPoint",(function(){return Se})),n.d(o,"fromSegment",(function(){return Oe})),n.d(o,"from",(function(){return Ce})),n.d(o,"dot",(function(){return je})),n.d(o,"multiply",(function(){return _e})),n.d(o,"cross",(function(){return Le})),n.d(o,"length",(function(){return Fe})),n.d(o,"rotate90",(function(){return De})),n.d(o,"normalize",(function(){return Re})),n.d(o,"invert",(function(){return We})),n.d(o,"rotate",(function(){return Ne})),n.d(o,"project",(function(){return Pe})),n.d(o,"equal",(function(){return Ie}));var r={};n.r(r),n.d(r,"fromSegment",(function(){return Ke})),n.d(r,"toStandard",(function(){return Ze})),n.d(r,"intersectLine",(function(){return en}));var a={};n.r(a),n.d(a,"translate",(function(){return Te})),n.d(a,"toLeftOfSegment",(function(){return Ve})),n.d(a,"rotate",(function(){return He})),n.d(a,"project",(function(){return Ge})),n.d(a,"distanceToPoint",(function(){return Ue})),n.d(a,"distanceToLine",(function(){return qe})),n.d(a,"distanceToSegment",(function(){return nn})),n.d(a,"equal",(function(){return on}));var l={};n.r(l),n.d(l,"install",(function(){return xi}));var s={};n.r(s),n.d(s,"install",(function(){return Oi}));var c={};n.r(c),n.d(c,"install",(function(){return Ci}));var u={};n.r(u),n.d(u,"install",(function(){return Ni}));var p={};n.r(p),n.d(p,"SingleDoor",(function(){return Ii})),n.d(p,"DoubleDoor",(function(){return Vi})),n.d(p,"SlidingDoor",(function(){return Hi})),n.d(p,"ParentDoor",(function(){return Gi})),n.d(p,"Bealock",(function(){return Ui}));var d={};n.r(d),n.d(d,"BasicWindow",(function(){return qi})),n.d(d,"BoilerWindow",(function(){return Ki})),n.d(d,"FloorWindow",(function(){return Ji})),n.d(d,"LWindow",(function(){return Qi})),n.d(d,"UWindow",(function(){return Xi})),n.d(d,"LBoilerWindow",(function(){return Yi})),n.d(d,"UBoilerWindow",(function(){return Zi}));var f={};n.r(f),n.d(f,"install",(function(){return eo}));var h={};n.r(h),n.d(h,"install",(function(){return io}));var m={};n.r(m),n.d(m,"isHouse",(function(){return ao})),n.d(m,"isDrawing",(function(){return lo})),n.d(m,"fromHouse",(function(){return so}));var b={};n.r(b),n.d(b,"symbol",(function(){return mo})),n.d(b,"map",(function(){return bo}));var g={};n.r(g),n.d(g,"symbol",(function(){return go})),n.d(g,"typeSymbol",(function(){return vo})),n.d(g,"toolSymbol",(function(){return yo})),n.d(g,"map",(function(){return wo})),n.d(g,"typeMap",(function(){return ko})),n.d(g,"toolMap",(function(){return xo}));var v={};n.r(v),n.d(v,"typeSymbol",(function(){return To})),n.d(v,"toolSymbol",(function(){return So})),n.d(v,"typeMap",(function(){return Oo})),n.d(v,"toolMap",(function(){return Co}));var y={};n.r(y),n.d(y,"typeList",(function(){return jo}));var w,k=n("d198"),x=n("7580"),T=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("d81d"),n("d9e2"),n("1227"),n("2b0e")),S=n("5f5b"),O=n("b1e0"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column position-relative w-100 h-100",attrs:{id:"app"}},[n("div",[n("app-menu")],1),n("div",{staticClass:"d-flex flex-fill w-100"},[n("div",[n("app-tool-bar")],1),n("div",{staticClass:"h-100 w-100 overflow-hidden position-relative"},[n("div",{ref:"drawing",staticClass:"w-100 h-100",staticStyle:{"line-height":"0"},on:{dblclick:t.useTransformerFromSelector}}),n("app-tool-setting"),n("app-property-card"),n("div",{staticClass:"position-absolute",staticStyle:{right:"20px",bottom:"40px"}},[n("app-viewport")],1),n("div",{staticClass:"position-absolute",staticStyle:{left:"40px",bottom:"40px"}},[n("app-visible")],1)],1),n("div",[n("app-property")],1)])])},j=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex justify-content-between align-items-center border-bottom",staticStyle:{height:"76px"},attrs:{id:"menu"}},[n("div",{staticClass:"d-flex align-items-center px-3 font-weight-bold",staticStyle:{height:"50px","line-height":"50px"}},[n("b-img",{staticClass:"mr-3",staticStyle:{width:"30px"},attrs:{src:"img/House.svg"}}),n("span",[t._v("模型名称")])],1),n("div",{staticClass:"d-flex align-items-center app-custom"},t._l(t.toolGroupList,(function(e,i){return n("div",{key:i,staticClass:"d-flex align-items-center"},[t._l(e,(function(e){return n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.shownMap[e],expression:"shownMap[symbol]"}],key:e,staticClass:"menu-btn",attrs:{disabled:t.disabledMap[e],pressed:e===t.active,variant:"outline-secondary"},on:{click:t.buttonMethods[e]}},[n("b-img",{staticStyle:{width:"30px"},attrs:{src:t.toolMap[e].image[e===t.active?"active":"base"]}}),n("span",{staticClass:"mt-1"},[t._v(t._s(t.toolMap[e].label))])],1)})),i<t.toolGroupList.length-1?n("div",{staticClass:"border-left",staticStyle:{height:"50px"}}):t._e()],2)})),0),n("div",[n("b-button",{staticClass:"menu-btn",attrs:{variant:"outline-secondary"},on:{click:t.showExitModal}},[n("b-img",{staticStyle:{width:"30px"},attrs:{src:"img/Quit.svg"}}),n("span",{staticClass:"mt-1"},[t._v("退出")])],1)],1),n("b-modal",{attrs:{id:"clear-modal",title:"一键清空","hide-footer":"",size:"sm"}},[n("div",{staticClass:"d-block text-center mt-3 mb-4"},[t._v("您确定要清空当前楼层的户型图")]),n("div",{staticClass:"d-flex justify-content-center align-items-center"},[n("b-button",{staticClass:"mt-0 mr-3",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("clear-modal")}}},[t._v("取消")]),n("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"danger"},on:{click:t.clear}},[t._v("确定")])],1)]),n("b-modal",{attrs:{id:"exit-modal",title:"退出","hide-footer":"",size:"sm"}},[n("div",{staticClass:"d-block text-center mt-3 mb-4"},[t._v("您是否要退出户型图绘制工具")]),n("div",{staticClass:"d-flex justify-content-center align-items-center"},[n("b-button",{staticClass:"mt-0 mr-3",attrs:{block:""},on:{click:function(e){return t.$bvModal.hide("exit-modal")}}},[t._v("取消")]),n("b-button",{staticClass:"mt-0",attrs:{block:"",variant:"danger"},on:{click:t.exit}},[t._v("确定")])],1)])],1)},L=[],$=n("2fe6"),F=n("b192"),D=(n("d3b7"),n("159b"),n("b64b"),6e5),R={data:function(){return{active:this.$spec.menu.symbol.selector,locked:!1,hasWall:!1}},computed:{toolMap:function(){return this.$spec.menu.map},toolGroupList:function(){var t=this.$spec.menu.symbol;return[[t.selector,t.transformer],[t.save,t.clear,t.lock,t.unlock]]},disabledMap:function(){var t=this.$spec.menu.symbol,e={};return Object.keys(t).forEach((function(t){return e[t]=!1})),Object(F["a"])(Object(F["a"])({},e),{},Object($["a"])({},t.unlock,this.hasWall))},shownMap:function(){var t,e=this.$spec.menu.symbol,n={};return Object.keys(e).forEach((function(t){return n[t]=!0})),Object(F["a"])(Object(F["a"])({},n),{},(t={},Object($["a"])(t,e.lock,!this.locked),Object($["a"])(t,e.unlock,this.locked),t))},buttonMethods:function(){var t,e=this,n=this.$spec.menu.symbol;return t={},Object($["a"])(t,n.selector,(function(){return e.select()})),Object($["a"])(t,n.transformer,(function(){return e.move()})),Object($["a"])(t,n.save,(function(){return e.save()})),Object($["a"])(t,n.clear,(function(){return e.requestClear()})),Object($["a"])(t,n.lock,(function(){return e.lock()})),Object($["a"])(t,n.unlock,(function(){return e.unlock()})),t}},mounted:function(){this.init(),this.autoSave()},destroyed:function(){var t=this.$editor;this.$root.$off("floorChange",this._floorChangeListener),t.off("tool-open",this._openListener),t.off("wall-create",this._wallCreateListener),t.off("wall-destroy",this._wallDestroyListener)},methods:{init:function(){var t=this,e=this.$editor;this.$root.$on("floorChange",this._floorChangeListener=function(e){t.locked=e.locked}),e.on("tool-open",this._openListener=function(e){t.active!==e&&(t.active=e)}),e.on("wall-create",this._wallCreateListener=function(){t.hasWall=!0,t.locked||t.lock(!0)}),e.on("wall-destroy",this._wallDestroyListener=function(){0===e.solution.drawing.structure.getAllWallList().length&&(t.hasWall=!1,t.unlock())})},getLockShow:function(){return this.locked},getUnlockShow:function(){return!this.locked},getLockDisabled:function(){return this.hasWall},select:function(){this.$editor.feature.tool.openSelector()},move:function(){this.$editor.feature.tool.openTransformer()},save:function(){var t=this;this.$editor.feature.document.save().then((function(){t.$bvToast.toast("保存成功",{autoHideDelay:2e3,noHoverPause:!0,toastClass:"custom-toast",variant:"default"})}))},autoSave:function(){var t=this;setTimeout((function(){t.$bvToast.toast("自动保存成功...",{autoHideDelay:2e3,noHoverPause:!0,toastClass:"custom-toast",variant:"default"}),t.autoSave()}),D)},retreat:function(){console.log("retreat")},advance:function(){console.log("advance")},requestClear:function(){this.$bvModal.show("clear-modal")},clear:function(){this.$editor.feature.floor.clear(),this.$bvModal.hide("clear-modal"),this.locked&&this.unlock()},lock:function(t){var e=t?"底图已锁定，清空当前层户型图后可解锁":"底图已锁定";this.locked=!0,this.$bvToast.toast(e,{autoHideDelay:2e3,noHoverPause:!0,toastClass:"custom-toast",variant:"default"}),this.$root.$emit("lock")},unlock:function(){this.locked=!1,this.$root.$emit("unlock")},showExitModal:function(){this.$bvModal.show("exit-modal")},exit:function(){var t=this;this.$editor.feature.document.save().then((function(){t.$bvModal.hide("exit-modal"),window.close()}))}}},W=R,N=(n("bb78"),n("0c7c")),P=Object(N["a"])(W,_,L,!1,null,null,null),E=P.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-100 border-right d-flex",attrs:{id:"tool-bar-container"}},[n("b-button-toolbar",{staticClass:"flex-column border-right app-custom",staticStyle:{width:"68px","font-size":"12px"},attrs:{id:"app-toolgroup"}},t._l(t.toolList,(function(e,i){return n("b-button-group",{key:i,staticClass:"p-1"},[n("b-button",{staticClass:"d-flex flex-column align-items-center p-1 border-0",attrs:{pressed:e.id===t.active,variant:"outline-secondary"},on:{click:function(n){return t.changeTool(e.id)}}},[n("b-img",{staticStyle:{width:"30px"},attrs:{src:e.id===t.active?e.active:e.img}}),n("span",{staticClass:"app-text-tiny mt-1"},[t._v(t._s(e.title))])],1)],1)})),1),n("div",{staticClass:"tool-bar-content"},[n("span",{staticClass:"content-button",on:{click:t.toggleConetnt}},[n("b-icon",{attrs:{icon:t.contentVisible?"chevron-left":"chevron-right"}})],1),n(t.activeTool,{tag:"component",staticClass:"content-component",class:{hidden:!t.contentVisible}})],1)],1)},M=[],B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex flex-column",attrs:{id:"tool"}},[t._l(t.toolGroup,(function(e,i){return n("div",{key:e.title+i,staticClass:"px-2"},[n("div",{staticClass:"border-bottom px-2",staticStyle:{height:"30px","line-height":"30px"}},[t._v(t._s(e.title))]),n("div",{staticClass:"d-flex flex-wrap pt-2"},t._l(e.toolList,(function(e,i){return n("div",{key:e+i,staticClass:"tool-item",class:{"no-margin-right":(i+1)%3===0,"btn-active":t.toolGroupMap[e].id===t.activeToolGroup},on:{click:function(n){return t.activeTool(e)}}},[n("span",{staticStyle:{width:"40px",height:"40px","line-height":"40px"}},[n("b-img",{staticClass:"w-100 h-100",attrs:{src:t.toolGroupMap[e].id===t.activeToolGroup&&t.toolGroupMap[e].active?t.toolGroupMap[e].active:t.toolGroupMap[e].img}})],1),n("span",{staticClass:"mt-2 app-text-tiny text-center"},[t._v(t._s(t.toolGroupMap[e].title))])])})),0)])})),t._l(t.windoorGroup,(function(e,i){return n("div",{key:e.title+i,staticClass:"px-2"},[n("div",{staticClass:"border-bottom px-2",staticStyle:{height:"30px","line-height":"30px"}},[t._v(t._s(e.title))]),n("div",{staticClass:"d-flex flex-wrap pt-3"},t._l(e.toolList,(function(e,i){return n("div",{key:e+i,staticClass:"tool-item",class:{"no-margin-right":(i+1)%3===0},on:{click:function(n){return t.activeWindoor(e)}}},[n("span",{staticStyle:{width:"40px",height:"40px","line-height":"40px"}},[n("b-img",{staticClass:"w-100 h-100",attrs:{src:t.windoorMap[e].img}})],1),n("span",{staticClass:"mt-1 app-text-tiny text-center"},[t._v(t._s(t.windoorMap[e].title))])])})),0)])}))],2)},z=[],I="selector",V="transformer",H="builder",G="chamber",U="spliter",q="labeler",K="viewport",J=(w={},Object($["a"])(w,I,{id:I,title:"选择器",icon:"cursor",click:function(t){t.feature.tool.openSelector()}}),Object($["a"])(w,V,{id:V,title:"变形器",icon:"arrows-move",click:function(t){t.feature.tool.openTransformer()}}),Object($["a"])(w,H,{id:H,title:"画墙",img:"img/Wall.svg",active:"img/Wall_Active.svg",click:function(t){t.feature.tool.openBuilder()}}),Object($["a"])(w,G,{id:G,title:"画房间",img:"img/Room.svg",active:"img/Room_Active.svg",click:function(t){t.feature.tool.openChamber()}}),Object($["a"])(w,U,{id:U,title:"截断器",icon:"input-cursor",click:function(t){t.feature.tool.openSpliter()}}),Object($["a"])(w,q,{id:q,title:"标注",icon:"tags",click:function(t){t.feature.tool.openLabeler()}}),Object($["a"])(w,K,{id:K,title:"视口",icon:"search",click:function(t){t.feature.tool.openViewport()}}),w),Q={singleDoor:{id:"singleDoor",title:"单开门",img:"img/SingleDoor.svg"},doubleDoor:{id:"doubleDoor",title:"双开门",img:"img/DoubleDoor.svg"},slidingDoor:{id:"slidingDoor",title:"推拉门",img:"img/SlidingDoor.svg"},basicWindow:{id:"basicWindow",title:"普通窗",img:"img/BasicWindow.svg"},boilerWindow:{id:"boilerWindow",title:"一字飘窗",img:"img/BoilerWindow.svg"},bealock:{id:"bealock",title:"垭口",img:"img/Bealock.svg"}},X=[{title:"画墙",toolList:[H,G]}],Y=[{title:"门窗",toolList:["singleDoor","doubleDoor","slidingDoor","basicWindow","boilerWindow"]},{title:"其他构件",toolList:["bealock"]}],Z={name:"Tool",data:function(){return{activeToolGroup:null,toolGroup:X,windoorGroup:Y,toolGroupMap:J,windoorMap:Q}},mounted:function(){var t=this;this.activeTool(I),this.$editor.on("tool-open",this._toolOpenListener=function(e){t.activeToolGroup!==e&&(t.activeToolGroup=e,t.$root.$emit("toolGroupChange",e))})},destroyed:function(){this.$editor.off("open",this._toolOpenListener)},methods:{activeTool:function(t){J[t].click(this.$editor),this.activeToolGroup=t,this.$root.$emit("toolGroupChange",t)},activeWindoor:function(t){this.$editor.feature.tool.openDefault(),this.$editor.solution.drawing.windoor.createMovingHollow(t)}}},tt=Z,et=(n("6db6"),Object(N["a"])(tt,B,z,!1,null,null,null)),nt=et.exports,it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"tool-bar-material"}},[n("b-tabs",{staticClass:"p-2",attrs:{pills:"","no-fade":"","nav-class":"material-tab-nav"}},t._l(t.materialGroup,(function(e,i){return n("b-tab",{key:i,attrs:{title:e.title,active:e.active}},t._l(e.dataList,(function(e,i){return n("div",{key:i},[n("div",{staticClass:"border-bottom px-2",staticStyle:{height:"30px","line-height":"30px"}},[t._v(t._s(e.title))]),n("div",{staticClass:"d-flex flex-wrap pt-3"},t._l(e.materialList,(function(e,i){return n("div",{key:i,staticClass:"d-flex flex-column align-items-center mb-2",staticStyle:{width:"50px"},on:{click:function(n){return t.create(t.materialMap[e].id)}}},[n("span",{staticStyle:{width:"40px",height:"40px",cursor:"pointer"}},[n("b-img",{staticClass:"h-100 w-100",attrs:{src:t.materialMap[e].img}})],1),n("span",{staticClass:"mt-1 app-text-tiny text-center"},[t._v(t._s(t.materialMap[e].title))])])})),0)])})),0)})),1)],1)},ot=[],rt={0:{id:0,title:"单人床",img:"img/SingleDoor.png"},1:{id:1,title:"双人床",img:"img/SingleDoor.png"},2:{id:2,title:"组合床",img:"img/SingleDoor.png"},3:{id:3,title:"榻榻米",img:"img/SingleDoor.png"},4:{id:4,title:"单人沙发",img:"img/SingleDoor.png"},5:{id:5,title:"双人沙发",img:"img/SingleDoor.png"},6:{id:6,title:"多人沙发",img:"img/SingleDoor.png"},7:{id:7,title:"组合沙发",img:"img/SingleDoor.png"},8:{id:8,title:"转角沙发",img:"img/SingleDoor.png"},9:{id:9,title:"弧形沙发",img:"img/SingleDoor.png"},10:{id:10,title:"圆形餐桌",img:"img/SingleDoor.png"},11:{id:11,title:"方形餐桌",img:"img/SingleDoor.png"},12:{id:12,title:"长条形餐桌",img:"img/SingleDoor.png"},13:{id:13,title:"书桌",img:"img/SingleDoor.png"},14:{id:14,title:"梳妆台",img:"img/SingleDoor.png"},15:{id:15,title:"一字型橱柜",img:"img/SingleDoor.png"},16:{id:16,title:"L形橱柜",img:"img/SingleDoor.png"},17:{id:17,title:"U形橱柜",img:"img/SingleDoor.png"},18:{id:18,title:"浴缸",img:"img/SingleDoor.png"},19:{id:19,title:"淋浴房",img:"img/SingleDoor.png"},20:{id:20,title:"洗手台",img:"img/SingleDoor.png"},21:{id:21,title:"马桶",img:"img/SingleDoor.png"},22:{id:22,title:"洗衣机",img:"img/SingleDoor.png"},23:{id:23,title:"绿植",img:"img/SingleDoor.png"},24:{id:24,title:"地毯",img:"img/SingleDoor.png"},25:{id:25,title:"长方形楼梯",img:"img/SingleDoor.png"},26:{id:26,title:"L形楼梯",img:"img/SingleDoor.png"},27:{id:27,title:"U形楼梯",img:"img/SingleDoor.png"},28:{id:28,title:"圆形楼梯",img:"img/SingleDoor.png"},29:{id:29,title:"地板",img:"img/SingleDoor.png"},30:{id:30,title:"瓷砖",img:"img/SingleDoor.png"},31:{id:31,title:"地毯",img:"img/SingleDoor.png"}},at=[{title:"家具",dataList:[{title:"床",materialList:[0,1,2,3]},{title:"沙发",materialList:[4,5,6,7,8,9]},{title:"桌几",materialList:[10,11,12,13,14]}]},{title:"厨卫",dataList:[{title:"厨房",materialList:[15,16,17]},{title:"卫浴",materialList:[18,19,20,21,22]}]},{title:"家饰",dataList:[{title:"家饰",materialList:[23,24]}]},{title:"建筑",dataList:[{title:"楼梯",materialList:[25,26,27,28]},{title:"地板设计",materialList:[29,30,31]}]}],lt={name:"Material",data:function(){return{materialMap:rt,materialGroup:at}},mounted:function(){console.log("material")},methods:{create:function(t){console.log(t)}}},st=lt,ct=(n("9342"),Object(N["a"])(st,it,ot,!1,null,null,null)),ut=ct.exports,pt={tool:nt,material:ut},dt={name:"ToolBarContainer",data:function(){return{toolList:[{id:"tool",title:"绘制工具",img:"img/DrawTool.svg",active:"img/DrawTool_Active.svg"}],active:"tool",activeTool:nt,contentVisible:!0}},methods:{changeTool:function(t){this.active=t,this.activeTool=pt[t],this.contentVisible||this.toggleConetnt()},toggleConetnt:function(){var t=this.$editor.solution.drawing;this.contentVisible=!this.contentVisible,t.setOrigin(t.origin[0]+(this.contentVisible?-200:200),t.origin[1]),this.$root.$emit("drawing-resize")}}},ft=dt,ht=(n("0085"),Object(N["a"])(ft,A,M,!1,null,null,null)),mt=ht.exports,bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"position-absolute d-flex justify-content-center w-100",staticStyle:{top:"0",height:"0"}},[n(t.current,{tag:"component",staticClass:"border mt-1 position-absolute",staticStyle:{"background-color":"#FFF"}})],1)},gt=[],vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex",attrs:{id:"builder-setting"}},[n("b-form-radio-group",{staticClass:"d-flex align-items-center pr-1 pl-3",attrs:{options:t.alignOptions},on:{change:t.setWallAlignment},model:{value:t.align,callback:function(e){t.align=e},expression:"align"}}),n("div",{staticClass:"position-relative"},[n("b-form-group",{staticClass:"my-1 px-2 border-left border-right",staticStyle:{width:"12em"},attrs:{"label-cols-sm":"3","content-cols-sm":"9",label:"墙厚","label-for":"wall-thinkness"}},[n("b-input-group",{attrs:{append:"mm"}},[n("b-form-input",{attrs:{id:"wall-thinkness",type:"number",autocomplete:"off"},on:{change:t.setWallThinkness,focus:function(){return t.thinknessDropdownShow=!0},blur:function(){return t.thinknessDropdownShow=!1}},model:{value:t.thinkness,callback:function(e){t.thinkness=t._n(e)},expression:"thinkness"}})],1)],1),n("b-list-group",{directives:[{name:"show",rawName:"v-show",value:t.thinknessDropdownShow,expression:"thinknessDropdownShow"}],staticClass:"input-dropdown"},t._l(t.thinknessList,(function(e,i){return n("b-list-group-item",{key:i,attrs:{button:""},on:{mousedown:function(n){return t.setWallThinkness(e)}}},[t._v(t._s(e))])})),1)],1),n("b-form-checkbox",{staticClass:"d-flex align-items-center mx-3",on:{change:t.setSnapState},model:{value:t.snapState,callback:function(e){t.snapState=e},expression:"snapState"}},[t._v("吸附")])],1)},yt=[],wt=(n("a9e3"),10),kt=1e3,xt={name:"BuilderSetting",data:function(){return{thinkness:240,thinknessList:[100,120,180,200,240],thinknessDropdownShow:!1,align:"center",alignOptions:[{value:"center",text:"墙中线绘制"},{value:"right",text:"墙内线绘制"}],snapState:!0}},mounted:function(){this.setWallThinkness(this.thinkness),this.setWallAlignment(this.align),this.snapState=this.$editor.getState().snap},methods:{setWallThinkness:function(t){var e=Number(t);this.thinkness=e<wt?wt:e>kt?kt:e,this.$editor.solution.drawing.bricklayer.Builder.setThickness(this.thinkness)},setWallAlignment:function(t){this.$editor.solution.drawing.bricklayer.Builder.setAlignment(t)},setSnapState:function(t){this.$editor.setSnap(t)}}},Tt=xt,St=(n("7b33"),Object(N["a"])(Tt,vt,yt,!1,null,null,null)),Ot=St.exports,Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-flex",attrs:{id:"chamber-setting"}},[n("div",[n("b-form-group",{staticClass:"my-1 pr-2 pl-3 border-right",staticStyle:{width:"12em"},attrs:{"label-cols-sm":"3","content-cols-sm":"9",label:"墙厚","label-for":"wall-thinkness"}},[n("b-input-group",{attrs:{append:"mm"}},[n("b-form-input",{attrs:{id:"wall-thinkness",type:"number",autocomplete:"off"},on:{change:t.setWallThinkness,focus:function(){return t.thinknessDropdownShow=!0},blur:function(){return t.thinknessDropdownShow=!1}},model:{value:t.thinkness,callback:function(e){t.thinkness=t._n(e)},expression:"thinkness"}})],1)],1),n("b-list-group",{directives:[{name:"show",rawName:"v-show",value:t.thinknessDropdownShow,expression:"thinknessDropdownShow"}],staticClass:"input-dropdown"},t._l(t.thinknessList,(function(e,i){return n("b-list-group-item",{key:i,attrs:{button:""},on:{mousedown:function(n){return t.setWallThinkness(e)}}},[t._v(t._s(e))])})),1)],1),n("b-form-checkbox",{staticClass:"d-flex align-items-center mx-3",on:{change:t.setSnapState},model:{value:t.snapState,callback:function(e){t.snapState=e},expression:"snapState"}},[t._v("吸附")])],1)},jt=[],_t=10,Lt=1e3,$t={name:"ChamberSetting",data:function(){return{thinkness:240,thinknessList:[100,120,180,200,240],thinknessDropdownShow:!1,snapState:!0}},mounted:function(){this.setWallThinkness(this.thinkness),this.snapState=this.$editor.getState().snap},methods:{setWallThinkness:function(t){var e=Number(t);this.thinkness=e<_t?_t:e>Lt?Lt:e,this.$editor.solution.drawing.bricklayer.Chamber.setThickness(this.thinkness)},setSnapState:function(t){this.$editor.setSnap(t)}}},Ft=$t,Dt=(n("698f"),Object(N["a"])(Ft,Ct,jt,!1,null,null,null)),Rt=Dt.exports,Wt={builder:Ot,chamber:Rt},Nt={name:"ToolSetting",data:function(){return{current:null}},mounted:function(){var t=this;this.$root.$on("toolGroupChange",(function(e){t.current=Wt[e]}))}},Pt=Nt,Et=Object(N["a"])(Pt,bt,gt,!1,null,null,null),At=Et.exports,Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"border-left",attrs:{id:"property-container"}},[n("span",{staticClass:"property-button",on:{click:t.toggleConetnt}},[n("b-icon",{attrs:{icon:t.contentVisible?"chevron-right":"chevron-left"}})],1),n("div",{staticClass:"property-content",class:{hidden:!t.contentVisible}},[n("floor",{staticClass:"mb-3"}),n(t.activeTool,{tag:"component"})],1)])},Bt=[],zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"property-floor"}},[n("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v("户型属性")]),n("div",{staticClass:"d-flex flex-column app-text-tiny px-3"},[n("div",{staticClass:"property-item"},[n("span",[t._v("底图旋转：")]),n("div",{staticClass:"position-relative"},[n("b-form-input",{staticClass:"spin-input spin-button-hidden",staticStyle:{width:"39px",left:"36px"},attrs:{type:"number",readonly:t.bitmapLocked},on:{change:t.bitmapRotate},model:{value:t.property.bitmapRotation,callback:function(e){t.$set(t.property,"bitmapRotation",e)},expression:"property.bitmapRotation"}}),n("b-form-spinbutton",{staticClass:"mr-2",attrs:{inline:"",wrap:"",min:"0",max:"359",readonly:t.bitmapLocked},on:{change:function(e){return t.rotationUpdate("bitmap",e)}},model:{value:t.spinNumber.bitmapRotation,callback:function(e){t.$set(t.spinNumber,"bitmapRotation",e)},expression:"spinNumber.bitmapRotation"}}),n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-repeat","font-scale":"1.5"},on:{click:function(e){return t.bitmapRotate(0)}}})],1)]),n("div",{staticClass:"property-item"},[n("span",[t._v("指北针：")]),n("div",{staticClass:"position-relative"},[n("b-form-input",{staticClass:"position-absolute rounded-0 border-left-0 border-right-0 text-center spin-button-hidden",staticStyle:{width:"39px",left:"36px"},attrs:{type:"number"},on:{change:t.compassRotate},model:{value:t.property.compassRotation,callback:function(e){t.$set(t.property,"compassRotation",e)},expression:"property.compassRotation"}}),n("b-form-spinbutton",{staticClass:"mr-2",attrs:{inline:"",wrap:"",min:"0",max:"359"},on:{change:function(e){return t.rotationUpdate("compass",e)}},model:{value:t.spinNumber.compassRotation,callback:function(e){t.$set(t.spinNumber,"compassRotation",e)},expression:"spinNumber.compassRotation"}}),n("b-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"arrow-repeat","font-scale":"1.5"},on:{click:function(e){return t.compassRotate(0)}}})],1)]),n("div",{staticClass:"property-item"},[n("span",[t._v("楼层数量：")]),n("b-form-input",{staticStyle:{width:"137px"},attrs:{readonly:""},model:{value:t.property.length,callback:function(e){t.$set(t.property,"length",e)},expression:"property.length"}})],1),n("div",{staticClass:"property-item"},[n("span",[t._v("楼层选择：")]),n("b-form-select",{staticStyle:{width:"137px"},attrs:{options:t.floorOptions},on:{change:t.changeFloor},model:{value:t.selectedFloor,callback:function(e){t.selectedFloor=e},expression:"selectedFloor"}})],1),n("div",{staticClass:"property-item"},[n("span",[t._v("名称修改：")]),n("b-form-input",{staticStyle:{width:"137px"},attrs:{state:t.floorNameChangeState},on:{change:t.changeFloorName},model:{value:t.property.floorName,callback:function(e){t.$set(t.property,"floorName",e)},expression:"property.floorName"}})],1),n("div",{staticClass:"property-item"},[n("span",[t._v("户型面积（单层）：")]),n("div",{staticClass:"d-flex align-items-center"},[n("b-form-input",{staticClass:"mr-1",staticStyle:{width:"118px"},attrs:{readonly:""},model:{value:t.layerArea,callback:function(e){t.layerArea=e},expression:"layerArea"}}),n("span",[t._v("m²")])],1)])])])},It=[],Vt=(n("b680"),n("caad"),n("2532"),n("a434"),n("7db0"),n("b0c0"),function(t){return(t/1e6).toFixed(2)}),Ht=function(t){return t/Math.PI/2*360},Gt=function(t){return t/360*2*Math.PI},Ut=function(t){return t<0?0:t>359?359:Number(t)},qt={name:"FloorProperty",data:function(){return{floorOptions:[],property:{length:0,floorName:"",bitmapRotation:0,compassRotation:0},spinNumber:{bitmapRotation:0,compassRotation:0},selectedFloor:1,layerArea:0,floorNameChangeState:null,lockedFloor:[]}},computed:{bitmapLocked:function(){return this.lockedFloor.includes(this.selectedFloor)}},mounted:function(){var t=this,e=this.$editor;e.on("floor-set",this._floorSetListener=function(){t.updateFloorOptions(),t.updateProperty()}),e.on("area-change",this._areaListener=function(e){return t.layerArea=Vt(e)}),e.on("compass-change",this._compassListener=function(e){t.spinNumber.compassRotation=t.property.compassRotation=Number(Ht(e.rotation).toFixed())}),e.on("bitmap-create",this._bitmapListener=function(){return t.updateProperty()}),this.$root.$on("lock",(function(){t.bitmapLocked||t.lockedFloor.push(t.selectedFloor)})),this.$root.$on("unlock",(function(){t.bitmapLocked&&t.lockedFloor.splice(t.lockedFloor.indexOf(t.selectedFloor),1)}))},destroyed:function(){var t=this.$editor;t.off("floor-set",this._floorSetListener),t.off("area-change",this._areaListener),t.off("compass-change",this._compassListener),t.off("bitmap-create",this._bitmapListener)},methods:{compassRotate:function(t){this.property.compassRotation=Ut(t),this.$editor.solution.drawing.compass.setRotation(Gt(this.property.compassRotation))},bitmapRotate:function(t){if(!this.bitmapLocked){var e=this.$editor.solution.drawing.negative.getAllBitmapList(),n=Ut(t);this.spinNumber.bitmapRotation=this.property.bitmapRotation=n,e[0]&&e[0].setRotation(Gt(n))}},rotationUpdate:function(t,e){this.property["".concat(t,"Rotation")]=e,this["".concat(t,"Rotate")](e)},changeFloor:function(t){this.$editor.feature.floor.select(t),this.updateProperty(),this.selectedFloor=t,this.$root.$emit("floorChange",{locked:this.bitmapLocked})},changeFloorName:function(){var t=this,e=this.property.floorName;e?(this.$editor.feature.floor.setFloorName(e),this.floorOptions.find((function(e){return e.level===t.selectedFloor})).text=e):(this.$editor.feature.floor.setFloorName(""),this.property.floorName="",this.updateFloorOptions()),this.floorNameChangeState=!0},updateProperty:function(){var t=this.$editor.solution.drawing,e=this.$editor.feature.floor,n=e.currentFloor,i=t.negative.getAllBitmapList();this.property.length=e.length,this.property.floorName=n?n.name:"",this.property.compassRotation=Ht(t.compass.rotation),this.property.bitmapRotation=i[0]?Ht(i[0].rotation):0,this.selectedFloor=e.current,this.floorNameChangeState=null},updateFloorOptions:function(){var t=this.$editor.feature.floor.getData();this.floorOptions=t.list.map((function(t){return{level:t.level,text:t.name||"".concat(t.level,"层"),value:t.level}}))}}},Kt=qt,Jt=(n("4c00"),Object(N["a"])(Kt,zt,It,!1,null,null,null)),Qt=Jt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"property-room"}},[n("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v("功能间信息")]),n("div",{staticClass:"app-text-tiny px-3"},[n("div",{staticClass:"property-item"},[n("span",[t._v("房间类型：")]),n("b-form-select",{staticStyle:{width:"137px"},attrs:{options:t.options},on:{change:t.changeRoomType},model:{value:t.property.type,callback:function(e){t.$set(t.property,"type",e)},expression:"property.type"}})],1),n("div",{staticClass:"property-item"},[n("span",[t._v("房间名称：")]),n("b-form-input",{staticStyle:{width:"137px"},on:{change:t.changeRoomName},model:{value:t.property.name,callback:function(e){t.$set(t.property,"name",e)},expression:"property.name"}})],1)])])},Yt=[],Zt=null,te={name:"PropertyRoom",data:function(){return{property:{type:"",name:""}}},computed:{options:function(){var t=this.$spec.room.typeList.map((function(t){return{value:t,text:t}}));return t.unshift({value:"自定义",text:"自定义"}),t}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener),this.$root.$off("room-property-change",this._changeListener)},methods:{init:function(){var t=this,e=this.$editor;Zt=e.getSelected()[0],this.updateProperty(Zt),e.on("select",this._selectListener=function(e){var n=e[0];n!==Zt&&n.constructor===Zt.constructor&&(Zt=n,t.updateProperty(n))}),this.$root.$on("room-property-change",this._changeListener=function(){return t.updateProperty(Zt)})},updateProperty:function(t){var e=t.type,n=t.name;Object.assign(this.property,{type:e||"自定义",name:n||""})},changeRoomType:function(){this.property.name=this.property.type,Zt.setType(this.property.type),Zt.setName(this.property.name),this.$root.$emit("room-property-change")},changeRoomName:function(){Zt.setName(this.property.name||"未命名"),this.$root.$emit("room-property-change")}}},ee=te,ne=(n("783f"),Object(N["a"])(ee,Xt,Yt,!1,null,null,null)),ie=ne.exports,oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"property-wall"}},[n("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v("基础参数（墙体）")]),n("div",{staticClass:"app-text-small px-3"},[n("div",[n("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v("墙体类型：")]),n("b-form-radio-group",{staticClass:"wall-type-radio",attrs:{options:t.typeOptions,buttons:"","button-variant":"outline-secondary"},on:{change:t.setType},model:{value:t.property.type,callback:function(e){t.$set(t.property,"type",e)},expression:"property.type"}})],1),n("div",[n("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v("墙体参数：")]),n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"app-text-tiny",staticStyle:{width:"50px"}},[t._v("厚度")]),n("b-form-input",{staticClass:"mx-2",attrs:{min:"10",max:"1000",type:"range"},on:{update:t.setThickness},model:{value:t.property.thickness,callback:function(e){t.$set(t.property,"thickness",e)},expression:"property.thickness"}}),n("b-form-input",{staticClass:"mr-1",staticStyle:{width:"60px"},attrs:{min:"10",max:"1000"},on:{change:t.setThickness},model:{value:t.property.thickness,callback:function(e){t.$set(t.property,"thickness",e)},expression:"property.thickness"}}),n("span",[t._v("mm")])],1)])])])},re=[],ae=null,le={name:"PropertyWall",data:function(){return{property:{thickness:0,type:""}}},computed:{typeOptions:function(){var t=this.$spec.wall,e=t.typeSymbol,n=t.typeMap;return Object.keys(e).map((function(t){return{value:e[t],text:n[e[t]].label}}))}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this,e=this.$editor;ae=e.getSelected()[0],this.updateProperty(ae),e.on("select",this._selectListener=function(e){var n=e[0];n!==ae&&n.constructor===ae.constructor&&(ae=n,t.updateProperty(n))})},updateProperty:function(t){var e=t.thickness,n=t.type;Object.assign(this.property,{thickness:e.toFixed(),type:n||"common"})},setType:function(t){ae.setType(t)},setThickness:function(t){isNaN(Number(t))?this.property.thickness=100:ae.thickness=Number(t)}}},se=le,ce=(n("687c"),Object(N["a"])(se,oe,re,!1,null,null,null)),ue=ce.exports,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"property-hollow"}},[n("div",{staticClass:"border-bottom px-3",staticStyle:{height:"45px","line-height":"45px"}},[t._v(t._s("基础参数（"+t.typeName+"）"))]),n("div",{staticClass:"app-text-small px-3"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.hollowTypeOptions.length,expression:"hollowTypeOptions.length"}]},[n("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v(t._s(t.typeName+"类型："))]),n("b-form-radio-group",{staticClass:"type-radio",attrs:{options:t.hollowTypeOptions,buttons:"","button-variant":"outline-secondary"},on:{change:t.setType},model:{value:t.property.material,callback:function(e){t.$set(t.property,"material",e)},expression:"property.material"}})],1),n("div",[n("div",{staticStyle:{height:"40px","line-height":"40px"}},[t._v(t._s(t.typeName+"参数："))]),n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"app-text-tiny",staticStyle:{width:"50px"}},[t._v("长度")]),n("b-form-input",{staticClass:"mx-2",attrs:{min:"100",max:t.maxWidth,type:"range"},on:{update:t.setWidth},model:{value:t.property.width,callback:function(e){t.$set(t.property,"width",e)},expression:"property.width"}}),n("b-form-input",{staticClass:"mr-1",staticStyle:{width:"60px"},attrs:{min:"100",max:"3000"},on:{change:t.setWidth},model:{value:t.property.width,callback:function(e){t.$set(t.property,"width",e)},expression:"property.width"}}),n("span",[t._v("mm")])],1)]),n("div",{staticClass:"py-3 d-flex flex-row-reverse"},[n("b-button",{attrs:{variant:"primary"},on:{click:t.setDefault}},[t._v("恢复默认")])],1)])])},de=[],fe=n("0bd7"),he=(n("99af"),n("4de4"),Math),me=(he.PI,[0,0,1,0]),be=function(t,e,n,i){return me[0]=t,me[1]=e,me[2]=n,me[3]=i,me},ge=[0,0],ve=function(t,e){return ge[0]=t,ge[1]=e,ge},ye=[0,0,0,0],we=function(t,e,n,i){return ye[0]=t,ye[1]=e,ye[2]=n,ye[3]=i,ye},ke=[0,0],xe=function(t,e){return ke[0]=t,ke[1]=e,ke},Te=function(t,e,n,i){return xe(t+n,e+i)},Se=function(t,e,n,i){return ve(n-t,i-e)},Oe=Se,Ce=Se,je=function(t,e,n,i){return t*n+e*i},_e=function(t,e,n){return ve(t*n,e*n)},Le=function(t,e,n,i){return t*i-e*n},$e=n("a326"),Fe=function(t,e){return $e["b"].sqrt(je(t,e,t,e))},De=function(t,e){return ve(-e,t)},Re=function(t,e){var n=Fe(t,e);return 0===n&&$e["a"].throwError("Zero Vector CAN NOT be normalized."),ve(t/n,e/n)},We=function(t,e){return ve(-t,-e)},Ne=function(t,e,n){var i=$e["b"].cos(n),o=$e["b"].sin(n);return ve(t*i-e*o,t*o+e*i)},Pe=function(t,e,n,i){var o=Re(n,i);return _e.apply(void 0,Object(fe["a"])(o).concat([je.apply(void 0,[t,e].concat(Object(fe["a"])(o)))]))},Ee=1e-6,Ae=function(t){return t<Ee&&t>-Ee},Me=function(t,e){var n=t-e;return n<Ee&&n>-Ee},Be=function(t,e){return t-e>Ee},ze=function(t,e){return t-e<-Ee},Ie=function(t,e,n,i){return Me(t,n)&&Me(e,i)},Ve=function(t,e,n,i,r,a){return Be(Le.apply(o,Object(fe["a"])(Se(n,i,r,a)).concat(Object(fe["a"])(Se(r,a,t,e)))),0)},He=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=Se(i,r,t,e);return Te.apply(void 0,Object(fe["a"])(Ne.apply(o,Object(fe["a"])(a).concat([n]))).concat([i,r]))},Ge=function(t,e,n,i,r,a){if(on(t,e,n,i))return xe(t,e);var l=Se(t,e,n,i);return Ae(Le.apply(o,Object(fe["a"])(l).concat([r,a])))?xe(n,i):Te.apply(void 0,[t,e].concat(Object(fe["a"])(Pe.apply(o,Object(fe["a"])(l).concat([r,a])))))},Ue=function(t,e,n,i){return Fe.apply(o,Object(fe["a"])(Se(t,e,n,i)))},qe=function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return Ue.apply(void 0,[t,e].concat(Object(fe["a"])(Ge.apply(void 0,[t,e].concat(i)))))},Ke=function(t,e,n,r){var a=Oe(t,e,n,r),l=De.apply(o,Object(fe["a"])(Re.apply(o,Object(fe["a"])(a)))),s=je.apply(o,Object(fe["a"])(l).concat([t,e])),c=ze(s,0)?l:We.apply(o,Object(fe["a"])(l));return be.apply(i,[t,e].concat(Object(fe["a"])(c)))},Je=[0,0,0],Qe=0,Xe=1,Ye=2,Ze=function(t,e,n,i){return Je[Qe]=n,Je[Xe]=i,Je[Ye]=je(n,i,t,e),Je},tn=n("26a3"),en=function(t,e,n,i,o,r,a,l){var s=Ze(t,e,n,i),c=Object(tn["a"])(s,3),u=c[0],p=c[1],d=c[2],f=Ze(o,r,a,l),h=Object(tn["a"])(f,3),m=h[0],b=h[1],g=h[2],v=u*b-p*m,y=d*b-p*g,w=u*g-d*m;return Ae(v)?null:Ae(p)?xe(d/u,w/v):Ae(b)?xe(g/m,w/v):Ae(u)?xe(y/v,d/p):Ae(m)?xe(y/v,g/b):xe(y/v,w/v)},nn=function(t,e,n,i,o,r){return qe.apply(void 0,[t,e].concat(Object(fe["a"])(Ke(n,i,o,r))))},on=function(t,e,n,i){return Me(t,n)&&Me(e,i)},rn=n("2d58"),an=n("ac84");var ln=n("0402"),sn=(n("aff5"),function(t,e,n,i){return o.length.apply(o,Object(fe["a"])(o.fromBothPoint(t,e,n,i)))}),cn=function(t,e,n){var i=t.corner,o=t.back.corner,l=a.project.apply(a,[e,n].concat(Object(fe["a"])(r.fromSegment(i.x,i.y,o.x,o.y))));return sn.apply(void 0,[i.x,i.y].concat(Object(fe["a"])(l)))},un=null,pn={name:"PropertyHollow",data:function(){return{property:{material:"",width:0},hollowTypeOptions:[],typeName:"",maxWidth:0,aheadTrap:null,behindTrap:null}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this,e=this.$editor;un=e.getSelected()[0],this.updateProperty(un),e.on("select",this._selectListener=function(e){var n=e[0];n!==un&&n.constructor===un.constructor&&(un=n,t.updateProperty(n))})},updateProperty:function(t){var e=this.$spec.hollow,n=e.map,i=e.typeMap,o=t.materialName,r=t.width;Object.assign(this.property,{width:r.toFixed(),material:o});var a=null;Object.keys(i).forEach((function(t){i[t].list.includes(o)&&(a=i[t])})),this.typeName=a.label,this.hollowTypeOptions=a.list.map((function(t){return{value:t,text:n[t].label}})),this.updateTrap(t)},updateTrap:function(t){var e=t.surface,n=t.offset;if("virtual"!==e.name){var i=this.$editor.solution.drawing,o=e.back,r=i.windoor.getAllHollowList(),a=r.filter((function(n){return n!==t&&n!==t.$proxy&&n.surface===e})),l=r.filter((function(e){return e!==t&&e!==t.$proxy&&e.surface===o})),s=[],c=sn(e.corner.x,e.corner.y,o.corner.x,o.corner.y);a.forEach((function(t){var e=t.width,n=t.offset;s.push([n-e/2,n+e/2])})),l.forEach((function(t){var e=t.width,n=t.offset;s.push([c-(n+e/2),c-(n-e/2)])})),s.push([0,o.wall===o.next.wall?0:cn.apply(void 0,[e].concat(Object(fe["a"])(e.origin)))]),s.push([e.wall===e.next.wall?c:c-cn.apply(void 0,[o].concat(Object(fe["a"])(o.origin))),c]);var u=null,p=null;s.forEach((function(t){t[0]>n&&(null===p||t[1]<p[0])&&(p=t),t[1]<n&&(null===u||t[0]>u[1])&&(u=t)})),this.maxWidth=(p[0]-u[1]).toFixed(),this.aheadTrap=u,this.behindTrap=p}else this.maxWidth=1e4},setType:function(t){un.setMaterial(t)},setWidth:function(t){var e=un,n=e.offset,i=e.surface;if(isNaN(Number(t)))return this.property.width=100,void(un.width=100);if("virtual"!==i.name){if(Number(t)>this.maxWidth)return this.property.width=this.maxWidth,void(un.width=Number(this.maxWidth));var o=n-Number(t)/2,r=n+Number(t)/2;un.width=Number(t),o<this.aheadTrap[1]&&(un.offset=n+(this.aheadTrap[1]-o)),r>this.behindTrap[0]&&(un.offset=n-(r-this.behindTrap[0]))}else un.width=Number(t)},setDefault:function(){un.setDefaultWidth()}}},dn=pn,fn=(n("14ac"),Object(N["a"])(dn,pe,de,!1,null,null,null)),hn=fn.exports,mn={name:"Property",components:{Floor:Qt},data:function(){return{activeTool:null,contentVisible:!0}},mounted:function(){this.init()},destroyed:function(){var t=this.$editor;t.off("select",this._selectListener),t.off("select",this._unselectListener)},methods:{init:function(){var t=this,e=this.$editor,n={EditorWall:ue,EditorRoom:ie,EditorHollow:hn};e.on("select",this._selectListener=function(e){t.activeTool=n[e[0].className],t.contentVisible||t.toggleConetnt()}),e.on("unselect",this._unselectListener=function(){t.activeTool=null})},toggleConetnt:function(){this.contentVisible=!this.contentVisible,this.$root.$emit("drawing-resize")}}},bn=mn,gn=(n("f709"),Object(N["a"])(bn,Mt,Bt,!1,null,null,null)),vn=gn.exports,yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"property-card"}},[n(t.activeCard,{tag:"component",staticClass:"card-component app-text-tiny"})],1)},wn=[],kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticClass:"mr-2",staticStyle:{width:"25px"}},[t._v("类型")]),n("b-form-select",{staticClass:"mr-2",staticStyle:{width:"100px"},attrs:{options:t.options},on:{change:t.changeRoomType},model:{value:t.property.type,callback:function(e){t.$set(t.property,"type",e)},expression:"property.type"}}),n("b-form-input",{staticStyle:{width:"100px"},attrs:{placeholder:"房间名称"},on:{change:t.changeRoomName},model:{value:t.property.name,callback:function(e){t.$set(t.property,"name",e)},expression:"property.name"}})],1)},xn=[],Tn=null,Sn={name:"PropertyCardRoom",data:function(){return{property:{type:"",name:""}}},computed:{options:function(){var t=this.$spec.room.typeList.map((function(t){return{value:t,text:t}}));return t.unshift({value:"自定义",text:"自定义"}),t}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener),this.$root.$off("room-property-change",this._changeListener)},methods:{init:function(){var t=this,e=this.$editor;Tn=e.getSelected()[0],this.updateProperty(Tn),e.on("select",this._selectListener=function(e){var n=e[0];n!==Tn&&n.constructor===Tn.constructor&&(Tn=n,t.updateProperty(n))}),this.$root.$on("room-property-change",this._changeListener=function(){return t.updateProperty(Tn)})},updateProperty:function(t){var e=t.type,n=t.name;Object.assign(this.property,{type:e||"自定义",name:n||""})},changeRoomType:function(){this.property.name=this.property.type,Tn.setType(this.property.type),Tn.setName(this.property.name),this.$root.$emit("room-property-change")},changeRoomName:function(){Tn.setName(this.property.name||"未命名"),this.$root.$emit("room-property-change")}}},On=Sn,Cn=Object(N["a"])(On,kn,xn,!1,null,null,null),jn=Cn.exports,_n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.toolList,(function(e){return n("b-button",{key:e,attrs:{variant:"outline-secondary",title:t.toolMap[e].label},on:{click:t.buttonMethods[e]}},[n("span",{staticStyle:{height:"25px","line-height":"25px"}},[n("b-img",{staticClass:"w-100",attrs:{src:t.toolMap[e].image.base}})],1)])})),1)},Ln=[],$n=(n("ac1f"),n("1276"),null),Fn={name:"PropertyCardWall",computed:{toolMap:function(){return this.$spec.wall.toolMap},toolList:function(){var t=this.$spec.wall.toolSymbol;return[t.split,t.delete]},buttonMethods:function(){var t,e=this,n=this.$spec.wall.toolSymbol;return t={},Object($["a"])(t,n.split,(function(){return e.split()})),Object($["a"])(t,n.delete,(function(){return e.delete()})),t}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this.$editor;$n=t.getSelected()[0],t.on("select",this._selectListener=function(t){var e=t[0];e!==$n&&e.constructor===$n.constructor&&($n=e)})},split:function(){$n.split()},delete:function(){this.$editor.delete()}}},Dn=Fn,Rn=Object(N["a"])(Dn,_n,Ln,!1,null,null,null),Wn=Rn.exports,Nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.toolList,(function(e){return n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.shownMap[e],expression:"shownMap[symbol]"}],key:e,attrs:{variant:"outline-secondary",title:t.toolMap[e].label},on:{click:t.buttonMethods[e]}},[n("span",{staticStyle:{height:"25px","line-height":"25px"}},[n("b-img",{staticClass:"w-100",attrs:{src:t.toolMap[e].image.base}})],1)])})),1)},Pn=[],En=null,An={name:"PropertyCardWall",data:function(){return{entranceShow:!0}},computed:{toolMap:function(){return this.$spec.hollow.toolMap},toolList:function(){var t=this.$spec.hollow.toolSymbol;return[t.entrance,t.flipWall,t.flip,t.delete]},shownMap:function(){var t=this.$spec.hollow.toolSymbol,e={};return Object.keys(t).forEach((function(t){return e[t]=!0})),Object(F["a"])(Object(F["a"])({},e),{},Object($["a"])({},t.entrance,this.entranceShow))},buttonMethods:function(){var t,e=this,n=this.$spec.hollow.toolSymbol;return t={},Object($["a"])(t,n.entrance,(function(){return e.setEntrance()})),Object($["a"])(t,n.flipWall,(function(){return e.changeSurface()})),Object($["a"])(t,n.flip,(function(){return e.flip()})),Object($["a"])(t,n.delete,(function(){return e.delete()})),t}},mounted:function(){this.init()},destroyed:function(){this.$editor.off("select",this._selectListener)},methods:{init:function(){var t=this,e=this.$editor;En=e.getSelected()[0],this.updateToolList(En),e.on("select",this._selectListener=function(e){var n=e[0];n!==En&&n.constructor===En.constructor&&(En=n,t.updateToolList(n))})},getEntranceShow:function(){return this.entranceShow},updateToolList:function(t){var e=this.$spec.hollow,n=e.typeSymbol,i=e.typeMap;this.entranceShow=i[n.door].list.includes(t.materialName)},setEntrance:function(){En.setEntrance()},changeSurface:function(){En.changeSurface()},flip:function(){En.flip()},delete:function(){En.arrow&&En.arrow.remove(),this.$editor.delete()}}},Mn=An,Bn=Object(N["a"])(Mn,Nn,Pn,!1,null,null,null),zn=Bn.exports,In={name:"PropertyCard",data:function(){return{activeCard:null,position:[0,0]}},mounted:function(){this.init()},destroyed:function(){var t=this.$editor;t.off("select",this._selectListener),t.off("unselect",this._unselectListener),document.removeEventListener("mousemove",this._moveListener)},methods:{init:function(){var t=this,e=this.$editor,n=document.getElementById("property-card"),i={EditorWall:Wn,EditorRoom:jn,EditorHollow:zn};e.on("select",this._selectListener=function(e){t.activeCard=i[e[0].className],n.style.left="".concat(t.position[0]+30,"px"),n.style.top="".concat(t.position[1]-70,"px")}),e.on("unselect",this._unselectListener=function(){t.activeCard=null}),document.addEventListener("mousemove",this._moveListener=function(e){t.position[0]=e.layerX,t.position[1]=e.layerY})}}},Vn=In,Hn=(n("507d"),Object(N["a"])(Vn,yn,wn,!1,null,null,null)),Gn=Hn.exports,Un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-4",attrs:{id:"viewport"}},[n("div",{staticClass:"mr-4",staticStyle:{width:"40px",cursor:"pointer"},on:{click:t.negativeBackToCenter}},[n("b-img",{staticClass:"h-100 w-100",attrs:{src:"img/ViewReset.svg"}})],1),n("span",{staticStyle:{width:"25px",height:"30px","line-height":"25px",cursor:"pointer"},on:{click:t.zoomOut}},[n("b-img",{staticClass:"w-100 h-100",attrs:{src:"img/Dash.svg"}})],1),n("b-form-input",{staticClass:"mx-2",attrs:{type:"range",min:"1",max:"100"},on:{update:t.changeScale},model:{value:t.inputScale,callback:function(e){t.inputScale=e},expression:"inputScale"}}),n("span",{staticStyle:{width:"25px",height:"30px","line-height":"25px",cursor:"pointer"},on:{click:t.zoomIn}},[n("b-img",{staticClass:"w-100 h-100",attrs:{src:"img/Plus.svg"}})],1)],1)},qn=[],Kn=1,Jn=200,Qn={name:"Viewport",data:function(){return{inputScale:0,inputScaleClone:0}},computed:{scale:function(){return 100-this.inputScale}},mounted:function(){var t=this,e=this.$editor.solution.drawing;this.inputScale=100-e.scale,this._interval=setInterval((function(){t.inputScaleClone=100-e.scale,t.inputScaleClone!==t.inputScale&&(t.inputScale=t.inputScaleClone)}),Jn)},destroyed:function(){clearInterval(this._interval)},methods:{negativeBackToCenter:function(){this.$editor.feature.drawing.negativeBackToCenter()},changeScale:function(){this.$editor.solution.drawing.setScale(this.scale)},zoomOut:function(){1!=this.inputScale&&(this.inputScale=Number(this.inputScale)-Kn,this.$editor.solution.drawing.setScale(this.scale))},zoomIn:function(){100!=this.inputScale&&(this.inputScale=Number(this.inputScale)+Kn,this.$editor.solution.drawing.setScale(this.scale))}}},Xn=Qn,Yn=(n("95f6"),Object(N["a"])(Xn,Un,qn,!1,null,null,null)),Zn=Yn.exports,ti=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"visible"}},[n("b-dropdown",{attrs:{"no-caret":"",dropup:"",size:"sm",variant:"link"},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("b-img",{attrs:{src:"img/Eye.svg"}})]},proxy:!0}])},[n("b-dropdown-group",{attrs:{header:"勾选隐藏项","header-classes":"visible-dropdown-header"}},[n("b-dropdown-form",{staticClass:"visible-dropdown-form"},[n("b-form-checkbox",{on:{change:t.changeRoomNameVisible},model:{value:t.visible.roomName,callback:function(e){t.$set(t.visible,"roomName",e)},expression:"visible.roomName"}},[t._v("房间名")]),n("b-form-checkbox",{on:{change:t.changeRoomAreaVisible},model:{value:t.visible.roomArea,callback:function(e){t.$set(t.visible,"roomArea",e)},expression:"visible.roomArea"}},[t._v("面积")]),n("b-form-checkbox",{on:{change:t.changeSizeVisible},model:{value:t.visible.size,callback:function(e){t.$set(t.visible,"size",e)},expression:"visible.size"}},[t._v("尺寸标注")])],1)],1)],1)],1)},ei=[],ni={name:"Visible",data:function(){return{visible:{roomName:!1,roomArea:!1,size:!1}}},mounted:function(){this.$editor.setRoomAreaShow(!0)},methods:{changeRoomNameVisible:function(t){this.$editor.setRoomNameShow(!t)},changeRoomAreaVisible:function(t){this.$editor.setRoomAreaShow(!t)},changeSizeVisible:function(t){this.$editor.setDimensionShow(!t)}}},ii=ni,oi=(n("40e4"),Object(N["a"])(ii,ti,ei,!1,null,null,null)),ri=oi.exports,ai={name:"",components:{AppMenu:E,AppToolBar:mt,AppToolSetting:At,AppProperty:vn,AppPropertyCard:Gn,appViewport:Zn,appVisible:ri},mounted:function(){var t=this.$editor.solution.drawing;t.mount(this.$refs.drawing),this.$editor.feature.drawing.originBackToCenter(),t.options.style.backgroundColor=16711422,t.structure.options.corner.style.hover.color=4235007,t.structure.options.wall.style.color=8355711,t.structure.options.wall.midline.show=!1,t.grid.options.rectangular.style.lineWidth=.5,t.compass.element.setNorthPointColor(4235007),t.compass.element.setSouthPointColor(14540253),this.$root.$on("drawing-resize",(function(){t.resize()}))},methods:{useTransformerFromSelector:function(){var t=this.$editor.solution,e=t.tool,n=t.drawing;e.activated===e.symbol.SELECTOR&&(e.openTransformer(),n.focusing instanceof this.$editor.Element.Hollow&&n.hammer.adjuster.pick())}}},li=ai,si=Object(N["a"])(li,C,j,!1,null,null,null),ci=si.exports,ui=n("c20e"),pi=n("a007"),di=n("e3fc"),fi=(n("dca8"),n("3ca3"),n("10d1"),n("ddb0"),n("7d94")),hi=function(t){Object(pi["a"])(n,t);var e=Object(di["a"])(n);function n(){return Object(an["a"])(this,n),e.apply(this,arguments)}return Object(rn["a"])(n)}(fi["a"].Emitter);function mi(){return{name:"untitled",floor:{base:0,list:[]}}}var bi,gi,vi,yi,wi,ki,xi=function(t){var e=t.editor,n=t.accessor,i={name:""};function o(){var t=mi();return t.floor=e.feature.floor.getData(),t}function r(t){i.name=t.name,e.feature.floor.setData(t.floor)}return{open:function(){return Object(x["a"])(Object(k["a"])().mark((function t(){var e;return Object(k["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.open();case 2:e=t.sent,r(e);case 4:case"end":return t.stop()}}),t)})))()},save:function(){var t=arguments;return Object(x["a"])(Object(k["a"])().mark((function i(){var r;return Object(k["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=!(t.length>0&&void 0!==t[0])||t[0],r&&e.feature.floor.updateFloorData(),i.next=4,n.save(o());case 4:case"end":return i.stop()}}),i)})))()}}},Ti=(n("8ba4"),n("4e82"),n("fb6a"),function(t){if(!Number.isInteger(t))throw new TypeError("Invalid base, an integer expected.")}),Si=function(t){if(Ti(t.base),!Array.isArray(t.list))throw new TypeError("Invalid lsit, an Array expected.")},Oi=function(t){var e=t.editor,n=null,i={base:null,list:[]},o=function(t){if(!i.list.some((function(e){return e.level===t})))throw new Error("Can NOT found a floor level=".concat(t))},r=function(){i.base=null,i.list=[]},a=function(t){return i.list.find((function(e){return e.level===t}))},l={get length(){return i.list.length},get base(){return i.base},get current(){return n},set current(t){n=t},get currentFloor(){return a(n)},select:function(t){if(Ti(t),o(t),null!==n){var i=a(n);Object.assign(i,e.serialize())}this.clear(!0),e.deserialize(a(t)),n=t},getData:function(){return i},setData:function(t){Si(t),r(),t.list.slice(0).sort((function(t,e){return t.level-e.level})).forEach((function(t){return i.list.push(t)})),i.base=t.base,l.select(t.base),e.emit("floor-set")},setFloorName:function(t){a(n).name=t},clear:function(t){var n=e.solution.drawing,i=n.structure.getAllCornerList(),o=n.windoor.getAllHollowList(),r=n.entrance.getAllArrowList(),a=n.negative.getAllBitmapList();e.feature.tool.openDefault();try{o.forEach((function(t){return t.remove()})),i.forEach((function(t){return t.remove()})),r.forEach((function(t){return t.remove()})),t&&a.forEach((function(t){return t.remove()}))}catch(l){console.log(l),this.save()}},updateFloorData:function(){null!==n&&Object.assign(a(n),e.serialize())}};return l},Ci=function(t){var e=t.editor,n=e.solution.tool,i={get activated(){return n.activated},get symbol(){return n.symbol},openDefault:function(){n.openDefault(),e.solution.drawing.common.selector.drop()},openSelector:function(){n.openSelector()},openTransformer:function(){n.openTransformer()},openBuilder:function(){n.openWallBuilder()},openChamber:function(){n.openChamber()}};return i},ji={common:null,bearing:3355443,short:16777215},_i=function(){function t(e,n){Object(an["a"])(this,t),this.wall=e,this.editor=n,this.className="EditorWall",this.type=""}return Object(rn["a"])(t,[{key:"thisSurface",get:function(){return this.wall.thisSurface}},{key:"thatSurface",get:function(){return this.wall.thatSurface}},{key:"thickness",get:function(){return this.wall.thickness},set:function(t){this.wall.thickness=t}},{key:"setType",value:function(t){this.type=t,t&&(this.wall.color=ji[t]||null)}},{key:"split",value:function(){var t=this.editor.solution.drawing,e=this.wall,n=e.thisCorner,i=e.thatCorner,o=e.thickness,r=t.structure.createCorner((n.x+i.x)/2,(n.y+i.y)/2);t.common.selector.drop(),this.wall.removeSimple();var a=this.editor.map.get(t.structure.createWall(n,r)),l=this.editor.map.get(t.structure.createWall(r,i));a.thickness=o,l.thickness=o,a.setType(this.type),l.setType(this.type)}}]),t}(),Li=function(t){return(t/1e6).toFixed(2)},$i=function(t,e,n,i,o,r){return((n-t)*(r-e)-(o-t)*(i-e))/2},Fi=function(t){if(!(t.length<3)){for(var e=t[0],n=0,i=0,o=0,r=t[1],a=2;a<t.length;a++){var l=t[a],s=$i.apply(void 0,Object(fe["a"])(e).concat(Object(fe["a"])(r),Object(fe["a"])(l)));o+=s,n+=(e[0]+r[0]+l[0])*s,i+=(e[1]+r[1]+l[1])*s,r=l}return[n/o/3,i/o/3]}},Di=function(){function t(e,n){Object(an["a"])(this,t),this.room=e,this.editor=n,this.className="EditorRoom",this.type="",this.name="",this.labelPosition=null}return Object(rn["a"])(t,[{key:"area",get:function(){return this.room.area}},{key:"label",get:function(){var t=this;return this.editor.solution.drawing.label.getAllLabelTextList().find((function(e){return e.room===t.room}))||null}},{key:"setType",value:function(t){this.type=t}},{key:"setName",value:function(t){if(this.name=t,this.label){var e="";this.editor.state.roomNameShow&&(e+=t),this.editor.state.roomAreaShow&&(e+="".concat(e.length>0?"\n":"","约").concat(Li(this.area),"m²")),this.label.setText(e)}}},{key:"getLabelPosition",value:function(){return Object(fe["a"])(this.labelPosition)}},{key:"setLabelPosition",value:function(t,e){this.labelPosition=[t,e],this.label&&this.label.setPosition(t,e)}},{key:"updateLabelPosition",value:function(){var t=this.room.getOuterSurfaceList().map((function(t){return[t.corner.x,t.corner.y]}));this.setLabelPosition.apply(this,Object(fe["a"])(Fi(t)))}},{key:"updateLabelText",value:function(){this.setName(this.name)}}]),t}(),Ri=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.pow(n*n+i*i,.5)},Wi=function(){function t(e,n){Object(an["a"])(this,t),this.hollow=e,this.editor=n,this.className="EditorHollow"}return Object(rn["a"])(t,[{key:"width",get:function(){return this.hollow.width},set:function(t){this.hollow.setWidth(t)}},{key:"materialName",get:function(){return this.hollow.materialName}},{key:"surface",get:function(){return this.hollow.surface}},{key:"offset",get:function(){return this.hollow.offset},set:function(t){this.hollow.setOffset(t)}},{key:"arrow",get:function(){var t=this,e=this.editor.solution.drawing.entrance.getAllArrowList().find((function(e){return e.hollow===t.hollow}));return e||null}},{key:"setMaterial",value:function(t){this.hollow.setMaterial(t)}},{key:"setDefaultWidth",value:function(){this.hollow.setWidth(this.hollow.defaultWidth)}},{key:"flip",value:function(){this.hollow.flip()}},{key:"setEntrance",value:function(){var t=this.editor.solution.drawing,e=t.entrance.getAllArrowList();if(this.arrow)this.arrow.remove();else{var n=this.surface.room,i=this.surface.back.room;e.forEach((function(t){var e=t.hollow.surface.room,o=t.hollow.surface.back.room;(!n||n!==e&&n!==o)&&(!i||i!==e&&i!==o)||t.remove()})),t.entrance.createArrow(this.hollow)}}},{key:"changeSurface",value:function(){var t=Ri(this.surface.corner,this.surface.back.corner)-this.offset;this.hollow.setSurface(this.surface.back),this.hollow.setOffset(t)}}]),t}(),Ni=function(t){var e,n,i,o,r=t.editor,a=t.Element,l=t.Tool,s=r.solution.drawing,c=s.bricklayer.Builder,u=s.bricklayer.Chamber,p=!1,d=(e={},Object($["a"])(e,l.Bricklayer.Builder.PICKUP_FROM,(function(t){0===t&&c.pick()})),Object($["a"])(e,l.Bricklayer.Builder.PICKUP_TO,(function(t){0===t&&c.build().pick().pick()})),e),f=(n={},Object($["a"])(n,l.Bricklayer.Builder.PICKUP_FROM,(function(t){2!==t||p||r.feature.tool.openDefault()})),Object($["a"])(n,l.Bricklayer.Builder.PICKUP_TO,(function(t){2!==t||p||c.drop()})),n),h=(i={},Object($["a"])(i,l.Bricklayer.Chamber.PICKUP_FROM,(function(t){0===t&&u.pick()})),Object($["a"])(i,l.Bricklayer.Chamber.PICKUP_TO,(function(t){0===t&&u.build().pick()})),i),m=(o={},Object($["a"])(o,l.Bricklayer.Chamber.PICKUP_FROM,(function(t){2!==t||p||r.feature.tool.openDefault()})),Object($["a"])(o,l.Bricklayer.Chamber.PICKUP_TO,(function(t){2!==t||p||u.drop()})),o),b=function(t){0===t&&s.common.selectorAction(s.focusing)},g=function(t){if(2!==t||p||r.feature.tool.openDefault(),0===t){var e=s.focusing;s.common.transformerAction(e),e instanceof a.Hollow?s.hammer.adjuster.pick():s.hammer.adjuster.drop(),e instanceof a.LabelText?s.label.LabelTransformer.pick():s.label.LabelTransformer.drop()}};s.on("pointerdown",(function(t){if(2===t.button){var e=function(){return p=!0},n=function t(){s.off("pointermove",e),window.removeEventListener("mouseup",t)};p=!1,s.on("pointermove",e),window.addEventListener("mouseup",n)}c.$state!==l.Ready&&d[c.$state](t.button),u.$state!==l.Ready&&h[u.$state](t.button)})),s.on("pointerup",(function(t){r.feature.tool.activated===r.feature.tool.symbol.SELECTOR&&b(t.button),r.feature.tool.activated===r.feature.tool.symbol.TRANSFORMER&&g(t.button),u.$state!==l.Ready&&m[u.$state](t.button),c.$state!==l.Ready&&f[c.$state](t.button)}));var v=function(){var t=s.structure.getAllRoomList();return t.length?t.map((function(t){return t.area})).reduce((function(t,e){return t+e})):0},y=function(t){r.map.set(t,new _i(t,r)),t.on("destory",(function(){return r.map.delete(t)}))},w=function(t){var e=new Di(t,r);r.map.set(t,e),setTimeout((function(){var n="未命名",i=s.label.createLabelText();i.setRoom(t),e.setName(n),e.updateLabelPosition(),r.emit("area-change",v()),t.on("destroy",(function(){i.remove(),r.map.delete(t)})),c.$state===l.Bricklayer.Builder.PICKUP_TO&&1!==c.from.size&&c.drop()}))},k=function(t){r.map.has(t)||r.map.set(t,new Wi(t,r)),t.on("destory",(function(){return r.map.delete(t)}))},x=function(t){t.on("change",(function(){t.room&&r.map.get(t.room).setLabelPosition(t.x,t.y)}))},T=function(t){t.on("pointerdown",(function(){t.flip()}))};s.on("element-create",(function(t){t instanceof a.Wall&&y(t),t instanceof a.Room&&w(t),t instanceof a.Hollow&&k(t),t instanceof a.LabelText&&x(t),t instanceof a.Arrow&&T(t)})),s.structure.on("change",(function(){var t,e=Object(ln["a"])(s.structure.rooms());try{for(e.s();!(t=e.n()).done;){var n=t.value;r.map.get(n).updateLabelPosition(),r.map.get(n).updateLabelText()}}catch(i){e.e(i)}finally{e.f()}r.emit("area-change",v())})),window.addEventListener("keydown",(function(t){if("Escape"===t.key){if(r.feature.tool.activated===r.feature.tool.symbol.WALL_BUILDER&&c.$state===l.Bricklayer.Builder.PICKUP_TO)return void c.drop();r.feature.tool.openDefault()}"Delete"===t.key&&s.common.remove()}));var S={originBackToCenter:function(){var t=s.width,e=s.height;s.setOrigin(t/2,e/2),s.setScale(25)},negativeBackToCenter:function(){var t=s.width,e=s.height,n=s.negative.getAllBitmapList();if(n[0]){var i=n[0],o=i.width,r=i.height;s.viewport.ViewAdjuster.backToCenter(-o/2,r/2,o/2,-r/2)}else s.setOrigin(t/2,e/2),s.setScale(25)}};return S},Pi=(n("cb29"),Math.PI),Ei=60,Ai=15,Mi=10,Bi={stateless:{line:0,arcLine:14145753,fill:16777215,windowFill:13421772},hover:{line:8053503,arcLine:15464441,fill:16777215,windowFill:13421772},select:{line:4096759,arcLine:15068665,fill:16777215,windowFill:13421772},virtual:{line:16711680,arcLine:16711680,fill:16777215,windowFill:16777215}},zi=function(t){var e=t.hover,n=t.focus,i=t.select,o=t.virtual;return i||n?Bi.select:e?Bi.hover:o?Bi.virtual:Bi.stateless},Ii={width:800,render:function(t,e){var n=e.width,i=e.height,o=e.fliped,r=e.scale,a=o?1:0,l=Ai/r,s=Ei/r,c=zi(e);return t.lineStyle(l,c.arcLine).beginFill(c.fill,.1).arc(n*a,i/2,n,-Pi/2*a-Pi/2,-Pi*a/2).lineTo(n*a,i/2).lineTo(0,i/2-n+a*n).endFill().beginFill(c.fill).lineStyle(l,c.fill).drawRect(0,0,n,i).lineStyle(l,c.line).moveTo(0,0).lineTo(0,i).moveTo(n,0).lineTo(n,i).lineStyle(l,c.line).drawRect((n-s)*a,i/2,s,-n),t.pivot.x=n/2,t.pivot.y=i/2,t}},Vi={width:800,render:function(t,e){var n=e.width,i=e.height,o=e.scale,r=Ai/o,a=Ei/o,l=zi(e);return t.lineStyle(r,l.arcLine).beginFill(l.fill,.1).arc(0,i/2,n/2,-Pi/2,0).lineTo(0,i/2).lineTo(0,(i-n)/2).endFill().beginFill(l.fill,.1).lineStyle(r,l.arcLine).arc(n,i/2,n/2,Pi,-Pi/2).lineTo(n,i/2).lineTo(n/2,i/2).endFill().beginFill(l.fill).lineStyle(r,l.fill).drawRect(0,0,n,i).lineStyle(r,l.line).moveTo(0,0).lineTo(0,i).moveTo(n,0).lineTo(n,i).drawRect(0,i/2,a,-n/2).drawRect(n,i/2,-a,-n/2),t.pivot.x=n/2,t.pivot.y=i/2,t}},Hi={width:800,render:function(t,e){var n=e.width,i=e.height,o=e.scale,r=e.fliped,a=r?-1:1,l=Ai/o,s=Mi/o,c=zi(e);return t.lineStyle(l,c.line).beginFill(c.fill).drawRect(0,0,n,i).drawRect(0+l+s,i/2,2*n/3,i/4*a).drawRect(n-l-s,i/2,-2*n/3,-i/4*a),t.pivot.x=n/2,t.pivot.y=i/2,t}},Gi={width:1450,render:function(t,e){var n=e.width,i=e.height,o=e.fliped,r=e.scale,a=o?1:0,l=Ai/r,s=zi(e);return t.lineStyle(l,s.line).beginFill(s.fill).drawRect(0,0,n,i).moveTo(0,i/3).lineTo(n,i/3).moveTo(0,2*i/3).lineTo(n,2*i/3).moveTo(n/4+a*n/2,i/3).lineTo(n/4+a*n/2,2*i/3).endFill(),t.pivot.x=n/2,t.pivot.y=i/2,t}},Ui={width:2e3,render:function(t,e){var n=e.width,i=e.height,o=e.scale,r=Ai/o,a=zi(e);return t.lineStyle(r,a.fill).beginFill(a.fill).drawRect(0,0,n,i).endFill().lineStyle(r,a.line).drawRect(0,0,n,i/3).drawRect(0,2*i/3,n,i/3),t.pivot.x=n/2,t.pivot.y=i/2,t}},qi={width:800,render:function(t,e){var n=e.width,i=e.height,o=e.scale,r=Ai/o,a=zi(e);return t.lineStyle(r,a.line).beginFill(a.fill).drawRect(0,0,n,i).moveTo(0,i/2).lineTo(n,i/2).endFill(),t.pivot.x=n/2,t.pivot.y=i/2,t}},Ki={width:1500,render:function(t,e){var n=e.width,i=e.scale,o=e.sillThickness,r=void 0===o?500/i:o,a=e.height,l=Ai/i,s=a,c=zi(e);return t.lineStyle(l,c.line).beginFill(c.windowFill).drawRect(0,-r,n,r).endFill().beginFill(c.fill).moveTo(0,-a).lineTo(0,-r).lineTo(n,-r).lineTo(n,-a).lineTo(n+s,-a).lineTo(n+s,-(r+s)).lineTo(-s,-(r+s)).lineTo(-s,-a).lineTo(0,-a).endFill().moveTo(-s/2,-a).lineTo(-s/2,-(r+s/2)).lineTo(n+s/2,-(r+s/2)).lineTo(n+s/2,-a),t.pivot.x=n/2,t.pivot.y=-a/2,t}},Ji={width:1500,render:function(t,e){var n=e.width,i=e.height,o=e.scale,r=Ai/o,a=zi(e);return t.lineStyle(r,a.line).beginFill(a.fill).drawRect(0,0,n,i).endFill().moveTo(0,i/2).lineTo(n,i/2).moveTo(0,i/3).lineTo(n,i/3).moveTo(0,2*i/3).lineTo(n,2*i/3).moveTo(n/2,i/3).lineTo(n/2,2*i/3),t.pivot.x=n/2,t.pivot.y=i/2,t}},Qi={render:function(t,e){var n=e.leftWidth,i=e.rightWidth,o=e.leftWallThickness,r=e.rightWallThickness,a=e.scale,l=Ai/a,s=zi(e);return t.lineStyle(l,s.line).beginFill(s.fill).moveTo(0,0).lineTo(i,0).lineTo(i,r).lineTo(o,r).lineTo(o,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(o/2,n).lineTo(o/2,r/2).lineTo(i,r/2),t.pivot.x=i/2,t.pivot.y=r/2,t}},Xi={render:function(t,e){var n=e.leftWidth,i=e.centerWidtn,o=e.rightWidth,r=e.leftWallThickness,a=e.centerWallThickness,l=e.rightWallThickness,s=e.scale,c=Ai/s,u=zi(e);return t.lineStyle(c,u.line).beginFill(u.fill).moveTo(0,0).lineTo(i,0).lineTo(i,o).lineTo(i-l,o).lineTo(i-l,a).lineTo(r,a).lineTo(r,n).lineTo(0,n).lineTo(0,0).endFill().moveTo(r/2,n).lineTo(r/2,a/2).lineTo(i-l/2,a/2).lineTo(i-l/2,o),t.pivot.x=i/2,t.pivot.y=a/2,t}},Yi={render:function(t,e){var n=e.leftWidth,i=e.rightWidth,o=e.leftWindowThickness,r=e.rightWindowThickness,a=e.leftWallThickness,l=e.rightWallThickness,s=e.scale,c=Ai/s,u=zi(e);return t.lineStyle(c,u.line).beginFill(u.windowFill).moveTo(a,l).lineTo(i,l).lineTo(i,l-r).lineTo(a-o,l-r).lineTo(a-o,n).lineTo(a,n).lineTo(a,l).endFill().beginFill(u.fill).moveTo(a-o,l-r).lineTo(i,l-r).lineTo(i,0).lineTo(i+l,0).lineTo(i+l,-r).lineTo(-o,-r).lineTo(-o,n+a).lineTo(0,n+a).lineTo(0,n).lineTo(a-o,n).lineTo(a-o,l-r).endFill().moveTo(0,n+a/2).lineTo(a/2-o,n+a/2).lineTo(a/2-o,l/2-r).lineTo(i+l/2,l/2-r).lineTo(i+l/2,0),t.pivot.x=i/2,t.pivot.y=l/2,t}},Zi={render:function(t,e){var n=e.leftWidth,i=e.centerWidtn,o=e.rightWidth,r=e.leftWindowThinkness,a=e.centerWindowThinkness,l=e.rightWindowThinkness,s=e.leftWallThickness,c=e.centerWallThickness,u=e.rightWallThickness,p=e.scale,d=Ai/p,f=zi(e);return t.lineStyle(d,f.line).beginFill(f.windowFill).moveTo(s,c).lineTo(i-u,c).lineTo(i-u,o).lineTo(i-u+l,o).lineTo(i-u+l,c-a).lineTo(s-r,c-a).lineTo(s-r,n).lineTo(s,n).lineTo(s,c).endFill().beginFill(f.fill).moveTo(s-r,c-a).lineTo(i+l-u,c-a).lineTo(i+l-u,o).lineTo(i,o).lineTo(i,o+u).lineTo(i+l,o+u).lineTo(i+l,-a).lineTo(-r,-a).lineTo(-r,n+s).lineTo(0,n+s).lineTo(0,n).lineTo(s-r,n).lineTo(s-r,c-a).endFill().moveTo(0,n+s/2).lineTo(s/2-r,n+s/2).lineTo(s/2-r,c/2-a).lineTo(i+l-u/2,c/2-a).lineTo(i+l-u/2,o+u/2).lineTo(i,o+u/2),t.pivot.x=i/2,t.pivot.y=c/2,t}},to=[{id:"singleDoor",material:p.SingleDoor},{id:"doubleDoor",material:p.DoubleDoor},{id:"slidingDoor",material:p.SlidingDoor},{id:"bealock",material:p.Bealock},{id:"basicWindow",material:d.BasicWindow},{id:"boilerWindow",material:d.BoilerWindow}],eo=function(){var t=Object(x["a"])(Object(k["a"])().mark((function t(e){var n,i;return Object(k["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.Resource,i=[n.WindoorListRegister(to)],t.abrupt("return",Promise.all(i));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),no=null,io=function(t){var e=t.editor;no=setInterval((function(){e.feature.floor.updateFloorData()}),5e3),window.addEventListener("error",(function(){clearInterval(no),e.feature.document.save(!1)}))},oo=function(t){var e={begin:function(t,e){var n=e.negative.getAllBitmapList();n[0]&&(t.bitmap={position:[n[0].x,n[0].y],rotation:n[0].rotation})},walls:function(t){t.wallList=[]},wall:function(e,n){e.wallList.push({type:t.map.get(n).type})},rooms:function(t){t.roomList=[]},room:function(e,n){var i=t.map.get(n);e.roomList.push({type:i.type,name:i.name,labelPosition:Object(fe["a"])(i.labelPosition)})},hollows:function(t){t.hollowList=[]},hollow:function(t,e,n){var i=n.entrance.getAllArrowList().find((function(t){return t.hollow===e}));i?t.hollowList.push({entrance:{fliped:i.fliped}}):t.hollowList.push({})}},n={end:function(t,e){if(t.bitmap){var n=t.bitmap,i=n.position,o=n.rotation,r=e.negative.createBitmap("negative".concat(t.level));r.setPosition.apply(r,Object(fe["a"])(i)),r.setRotation(o)}},wall:function(e,n,i){var o=e.wallList[i],r=t.map.get(n);o.type&&r.setType(o.type)},room:function(e,n,i){var o=e.roomList[i],r=o.name,a=o.type,l=o.labelPosition,s=t.map.get(n);r&&s.setName(r),a&&s.setType(a),l&&s.setLabelPosition.apply(s,Object(fe["a"])(l))},hollow:function(t,e,n,i){var o=t.hollowList[n],r=o.entrance;if(r){var a=i.entrance.createArrow(e);a.fliped!==r.fliped&&a.flip()}}};return{serializer:e,deserializer:n}},ro=function(t){var e=t.Solution,n=t.accessor,i={Corner:e.Element.Corner,Wall:e.Element.Wall,Room:e.Element.Room,Hollow:e.Element.Hollow,LabelText:e.Element.LabelText,Bitmap:e.Element.Bitmap,Arrow:e.Element.Arrow},o={Ready:e.Tool.Ready,Common:e.Tool.Common,Hammer:e.Tool.Hammer,Bricklayer:e.Tool.Bricklayer},r={WindoorRegister:e.Resource.windoorRegister,WindoorListRegister:e.Resource.windoorListRegister,NegativeRegister:e.Resource.negativeRegister,NegativeListRegister:e.Resource.negativeListRegister},a=function(t){return Object.freeze({editor:t,Element:i,Tool:o,Resource:r,accessor:n})},p=function(t){Object(pi["a"])(o,t);var n=Object(di["a"])(o);function o(){var t;Object(an["a"])(this,o),t=n.call(this),t.map=new WeakMap,t.state={roomNameShow:!0,roomAreaShow:!0,dimensionShow:!0,snap:!0};var r=a(Object(ui["a"])(t)),p=new e(oo(Object(ui["a"])(t))),d=p.drawing;return t.solution=p,t.feature={document:l.install(r),floor:s.install(r),tool:c.install(r),drawing:u.install(r)},f.install(r),h.install(r),t.feature.document.open(),d.common.on("selector-add",(function(e){var n=e.map((function(e){return t.map.get(e)||null}));t.emit("select",n)})),d.common.on("selector-clear",(function(){t.emit("unselect")})),d.on("element-create",(function(e){e instanceof i.Wall?t.emit("wall-create",e):e instanceof i.Room?t.emit("room-create",e):e instanceof i.Hollow?t.emit("hollow-create",e):e instanceof i.Bitmap&&t.emit("bitmap-create",e)})),d.on("element-destroy",(function(e){e instanceof i.Wall?t.emit("wall-destroy",e):e instanceof i.Room?t.emit("room-destroy",e):e instanceof i.Hollow&&t.emit("hollow-destroy",e)})),p.tool.on("open",(function(e){t.emit("tool-open",e)})),d.compass.element.on("change",(function(e){t.emit("compass-change",e)})),Object.freeze(Object(ui["a"])(t)),t}return Object(rn["a"])(o,[{key:"Element",get:function(){return i}},{key:"getSelected",value:function(){var t=this;return this.solution.drawing.common.getSelectedList().map((function(e){return t.map.get(e)||null}))}},{key:"getState",value:function(){return this.state}},{key:"serialize",value:function(){var t=this.feature.floor,e=t.currentFloor,n=this.solution.serializer.execute(e);return e.drawing=n,t.getData().list.forEach((function(t){t.drawing.compass?t.drawing.compass.rotation=n.compass.rotation:t.drawing.compass={rotation:n.compass.rotation}})),e}},{key:"deserialize",value:function(t){this.solution.deserializer.execute(t.drawing,t)}},{key:"updateAllRoomLabel",value:function(){var t,e=Object(ln["a"])(this.solution.drawing.structure.rooms());try{for(e.s();!(t=e.n()).done;){var n=t.value;this.map.get(n).updateLabelText()}}catch(i){e.e(i)}finally{e.f()}}},{key:"setRoomNameShow",value:function(t){this.state.roomNameShow=t,this.updateAllRoomLabel()}},{key:"setRoomAreaShow",value:function(t){this.state.roomAreaShow=t,this.updateAllRoomLabel()}},{key:"setDimensionShow",value:function(t){this.state.dimensionShow=t;var e,n=Object(ln["a"])(this.solution.drawing.measure.dimensions());try{for(n.s();!(e=n.n()).done;){var i=e.value;t?i.show():i.hide()}}catch(o){n.e(o)}finally{n.f()}}},{key:"setSnap",value:function(t){var e=this.solution.drawing;e.grid.options.rectangular.snap.enabled=t,e.structure.options.snap.corner.active=t,this.state.snap=t}},{key:"delete",value:function(){this.solution.drawing.common.remove()}}]),o}(hi);return p},ao=function(t){return!!t&&("string"===typeof t.name&&(!!Number.isInteger(t.base)&&!!Array.isArray(t.list)))},lo=function(t){return!(!t||!t.floor)&&("string"===typeof t.name&&(!!Number.isInteger(t.floor.base)&&!!Array.isArray(t.floor.list)))},so=function(t){return{name:t.name,floor:{base:1,list:t.list.map((function(t){return{name:"",level:t.level,bitmap:{position:[0,0],rotation:0},drawing:{compass:{rotation:0},cornerList:[],wallList:[],roomList:[],hollowList:[],stuffList:[],labelTextList:[],labelLineList:[]}}}))}}},co={install:function(t,e){var n=ro(e);t.prototype.$editor=new n}},uo=(n("e9c4"),location.origin),po=function(){function t(){Object(an["a"])(this,t)}return Object(rn["a"])(t,[{key:"getTicket",value:function(){return fetch(uo+"").then((function(){return""}))}},{key:"getFloor",value:function(){return fetch(uo+"").then((function(){return{base:2,list:[0,1,2].map((function(t){return{level:t}}))}}))}},{key:"getNegative",value:function(){return fetch(uo+"").then((function(){return[{id:"negative1",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.to8to.com%2Fcase%2F2006%2F23%2F20200623_6a750511c8d76b01310a6wvonv822qh0.jpg&refer=http%3A%2F%2Fpic.to8to.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1645100826&t=0437dfdfef1405d8c159efd7c130d5ec",scale:.05},{id:"negative2",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimages.081616.cn%2Farticle%2Fmaifang%2Fkanhuxing%2F232.jpg&refer=http%3A%2F%2Fimages.081616.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659786598&t=a3bdc6951b31bdb0f5151e2b2903bcbb",scale:.05},{id:"negative3",url:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimgs.soufun.com%2Fnews%2F2014_07%2F24%2Fnews%2F1406194190774_000.jpg&refer=http%3A%2F%2Fimgs.soufun.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1660013137&t=5443dd7d6e3a51f168c74bb27e1b3554",scale:.05}]}))}},{key:"getDrawing",value:function(){return fetch(uo+"").then((function(){return null}))}},{key:"saveDrawing",value:function(t){return fetch(uo+"",{method:"POST",body:JSON.stringify(t)})}}]),t}(),fo=new po,ho={install:function(t,e){uo=e.baseURL,t.prototype.$e100=fo}},mo={selector:"selector",transformer:"transformer",save:"save",clear:"clear",lock:"lock",unlock:"unlock"},bo=(bi={},Object($["a"])(bi,mo.selector,{label:"选择",image:{base:"img/Pointer.svg",active:"img/Pointer_Active.svg"}}),Object($["a"])(bi,mo.transformer,{label:"移动",image:{base:"img/Move.svg",active:"img/Move_Active.svg"}}),Object($["a"])(bi,mo.save,{label:"保存",image:{base:"img/Save.svg"}}),Object($["a"])(bi,mo.clear,{label:"清空",image:{base:"img/Clear.svg"}}),Object($["a"])(bi,mo.lock,{label:"锁定",image:{base:"img/Lock.svg"}}),Object($["a"])(bi,mo.unlock,{label:"解锁",image:{base:"img/Lock.svg"}}),bi),go={singleDoor:"singleDoor",doubleDoor:"doubleDoor",slidingDoor:"slidingDoor",basicWindow:"basicWindow",boilerWindow:"boilerWindow",bealock:"bealock"},vo={door:"door",window:"window",bealock:"bealock"},yo={entrance:"entrance",flipWall:"flipWall",flip:"flip",delete:"delete"},wo=(gi={},Object($["a"])(gi,go.singleDoor,{label:"单开门"}),Object($["a"])(gi,go.doubleDoor,{label:"双开门"}),Object($["a"])(gi,go.slidingDoor,{label:"推拉门"}),Object($["a"])(gi,go.basicWindow,{label:"普通窗"}),Object($["a"])(gi,go.boilerWindow,{label:"一字飘窗"}),Object($["a"])(gi,go.bealock,{label:"垭口"}),gi),ko=(vi={},Object($["a"])(vi,vo.door,{label:"门",list:[go.singleDoor,go.doubleDoor,go.slidingDoor]}),Object($["a"])(vi,vo.window,{label:"窗",list:[go.basicWindow,go.boilerWindow]}),Object($["a"])(vi,vo.bealock,{label:"垭口",list:[go.bealock]}),vi),xo=(yi={},Object($["a"])(yi,yo.entrance,{label:"入户门",image:{base:"img/Entrance.svg"}}),Object($["a"])(yi,yo.flipWall,{label:"墙侧翻转",image:{base:"img/FlipWall.svg"}}),Object($["a"])(yi,yo.flip,{label:"翻转",image:{base:"img/Flip.svg"}}),Object($["a"])(yi,yo.delete,{label:"删除",image:{base:"img/Delete.svg"}}),yi),To={common:"common",bearing:"bearing",short:"short"},So={split:"split",delete:"delete"},Oo=(wi={},Object($["a"])(wi,To.common,{label:"普通墙"}),Object($["a"])(wi,To.bearing,{label:"承重墙"}),Object($["a"])(wi,To.short,{label:"矮墙"}),wi),Co=(ki={},Object($["a"])(ki,So.split,{label:"截断",image:{base:"img/Split.svg"}}),Object($["a"])(ki,So.delete,{label:"删除",image:{base:"img/Delete.svg"}}),ki),jo=["客厅","餐厅","客餐厅","厨房","主卧","次卧","卧室","老人房","儿童房","过道","阳台","卫生间","玄关","地下室"],_o={install:function(t){t.prototype.$spec={menu:b,hollow:g,wall:v,room:y}}},Lo=(n("2b3d"),n("9861"),n("c6c5")),$o=function(){var t=Object(x["a"])(Object(k["a"])().mark((function t(){var e,n,i,o,r,a=arguments;return Object(k["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:function(){},t.next=3,fo.getTicket();case 3:n=t.sent,i=new URL(location.href),o=i.searchParams.get("host")||"127.0.0.1",r=i.searchParams.get("port")||"3001",Lo["a"]({origin:"http://".concat(o,":").concat(r),ticket:n},(function(t){e(t)}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Fo=n("8f9c");$o((function(t){T["default"].use(S["a"],Fo),T["default"].use(O["a"]),T["default"].use(ho,{baseURL:location.origin}),T["default"].use(_o),T["default"].use(co,{Solution:t,accessor:{save:function(t){return Object(x["a"])(Object(k["a"])().mark((function e(){return Object(k["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",fo.saveDrawing(t));case 1:case"end":return e.stop()}}),e)})))()},open:function(){return Object(x["a"])(Object(k["a"])().mark((function e(){var n,i,o,r;return Object(k["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=["https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic.to8to.com%2Fcase%2F2006%2F23%2F20200623_6a750511c8d76b01310a6wvonv822qh0.jpg&refer=http%3A%2F%2Fpic.to8to.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1645100826&t=0437dfdfef1405d8c159efd7c130d5ec","https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimages.081616.cn%2Farticle%2Fmaifang%2Fkanhuxing%2F232.jpg&refer=http%3A%2F%2Fimages.081616.cn&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1659786598&t=a3bdc6951b31bdb0f5151e2b2903bcbb","https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fimgs.soufun.com%2Fnews%2F2014_07%2F24%2Fnews%2F1406194190774_000.jpg&refer=http%3A%2F%2Fimgs.soufun.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1660013137&t=5443dd7d6e3a51f168c74bb27e1b3554"],i={name:"untitled",base:1,list:[1,2,3].map((function(t){return{level:t,bitmap:n[t-1],scale:.05}}))},m.isHouse(i)){e.next=4;break}throw new TypeError("Invalid house, a house object expected.");case 4:return e.next=6,t.Resource.negativeListRegister(i.list.map((function(t){return{id:"negative".concat(t.level),url:t.bitmap,scale:t.scale}})));case 6:return e.next=8,fo.getDrawing();case 8:if(o=e.sent,null===o&&(r=m.fromHouse(i),o=r),m.isDrawing(o)){e.next=12;break}throw new TypeError("Invalid drawing, a drawing object expected.");case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})))()}}});var e=new T["default"]({render:function(t){return t(ci)}});window.addEventListener("keydown",(function(t){t.altKey&&t.preventDefault()})),window.addEventListener("resize",(function(){e.$emit("drawing-resize")})),e.$mount("#app")}))},"687c":function(t,e,n){"use strict";n("2b1a")},"698f":function(t,e,n){"use strict";n("389a")},"6db6":function(t,e,n){"use strict";n("aeae")},"783f":function(t,e,n){"use strict";n("ddc3")},"7b33":function(t,e,n){"use strict";n("b2ed")},8899:function(t,e,n){},"88d6":function(t,e,n){},"8f9c":function(t){t.exports=JSON.parse('{"breakpoints":["xs","sm","md","lg","xl","xxl"],"formControls":{"size":"sm"},"BLink":{"activeClass":"active"},"BButton":{"variant":"primary","size":"sm"},"BToast":{"toaster":"b-toaster-top-center","autoHideDelay":3000,"variant":"primary","toastClass":null,"headerClass":null,"bodyClass":null},"BModal":{"cancelVariant":"secondary","okVariant":"primary"},"BFormGroup":{"labelSize":"sm"},"BInputGroup":{"size":"sm"},"BNavItem":{"linkClasses":["p-0","px-1"]}}')},9018:function(t,e,n){},9342:function(t,e,n){"use strict";n("f083")},"95f6":function(t,e,n){"use strict";n("cdee")},aeae:function(t,e,n){},b2ed:function(t,e,n){},bb78:function(t,e,n){"use strict";n("5051")},cdee:function(t,e,n){},ddc3:function(t,e,n){},f083:function(t,e,n){},f709:function(t,e,n){"use strict";n("fabd")},fabd:function(t,e,n){}});